<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="assets/resources/config.js"></script>
<script type="text/javascript" src="assets/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">ReplacementTyping</h1>

<div class="code">

<br/>

<br/>
</div>

<div class="doc">
<a id="lab62"></a><h1 class="section">Replacement (Introduction-qp) Typing</h1>

<div class="paragraph"> </div>

 This module contains lemmas related to replacement typing
    (<span class="inlinecode">|-//</span> and <span class="inlinecode">|-//<span class="id" title="var">v</span></span>). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Coq.Program.Equality</span> <span class="id" title="library">List</span> <span class="id" title="library">String</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Sequences.html#"><span class="id" title="library">Sequences</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Definitions.html#"><span class="id" title="library">Definitions</span></a> <a class="idref" href="Binding.html#"><span class="id" title="library">Binding</span></a> <a class="idref" href="InvertibleTyping.html#"><span class="id" title="library">InvertibleTyping</span></a> <a class="idref" href="Narrowing.html#"><span class="id" title="library">Narrowing</span></a> <a class="idref" href="PreciseTyping.html#"><span class="id" title="library">PreciseTyping</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="RecordAndInertTypes.html#"><span class="id" title="library">RecordAndInertTypes</span></a> <a class="idref" href="Replacement.html#"><span class="id" title="library">Replacement</span></a> <a class="idref" href="Subenvironments.html#"><span class="id" title="library">Subenvironments</span></a> <a class="idref" href="TightTyping.html#"><span class="id" title="library">TightTyping</span></a> <a class="idref" href="Weakening.html#"><span class="id" title="library">Weakening</span></a>.<br/>

<br/>
</div>

<div class="doc">
Whereas invertible typing does replacement for singleton types in one direction,
    replacement typing does the replacment in the other direction.

<div class="paragraph"> </div>

    Note that we can't simply define this using three rules:
    1) identity from invertible typing
    2) two repl subtyping rules
    The reason is that if we did that, repl typing would necessarily apply the replacement
    in all subterms of a term, whereas we want to be able to say, for example:
    <span class="inlinecode">Г</span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <br>
    <span class="inlinecode">Г</span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">U</span></span> <br>
    <span class="inlinecode"><span class="id" title="var">__________</span></span> <br>
    <span class="inlinecode">Г</span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">U</span></span> <br>
 
<div class="paragraph"> </div>

<a id="lab63"></a><h2 class="section">Replacement Typing for Paths</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;G '⊢//' p ':' T" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="var">p</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 59).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="ty_repl" class="idref" href="#ty_repl"><span class="id" title="inductive">ty_repl</span></a> : <a class="idref" href="Definitions.html#ctx"><span class="id" title="definition">ctx</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#path"><span class="id" title="inductive">path</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span> :=<br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>     <br>
    <span class="inlinecode">―――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>     
</div>
<div class="code">
| <a id="ty_inv_r" class="idref" href="#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:3" class="idref" href="#G:3"><span class="id" title="binder">G</span></a> <a id="p:4" class="idref" href="#p:4"><span class="id" title="binder">p</span></a> <a id="T:5" class="idref" href="#T:5"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:3"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="ReplacementTyping.html#p:4"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:5"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:3"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:4"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:5"><span class="id" title="variable">T</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>     <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>     <br>
    <span class="inlinecode">――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">U</span></span>      
</div>
<div class="code">
| <a id="ty_and_r" class="idref" href="#ty_and_r"><span class="id" title="constructor">ty_and_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:6" class="idref" href="#G:6"><span class="id" title="binder">G</span></a> <a id="p:7" class="idref" href="#p:7"><span class="id" title="binder">p</span></a> <a id="T:8" class="idref" href="#T:8"><span class="id" title="binder">T</span></a> <a id="U:9" class="idref" href="#U:9"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:6"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:7"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:8"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:6"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:7"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:9"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:6"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:7"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:8"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ReplacementTyping.html#U:9"><span class="id" title="variable">U</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span>^<span class="id" title="var">p</span></span>  <br>
    <span class="inlinecode">――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">T</span>)</span>      
</div>
<div class="code">
| <a id="ty_bnd_r" class="idref" href="#ty_bnd_r"><span class="id" title="constructor">ty_bnd_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:10" class="idref" href="#G:10"><span class="id" title="binder">G</span></a> <a id="p:11" class="idref" href="#p:11"><span class="id" title="binder">p</span></a> <a id="T:12" class="idref" href="#T:12"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:10"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:11"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="ReplacementTyping.html#p:11"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T:12"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:10"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:11"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T:12"><span class="id" title="variable">T</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>             <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">q</span>:</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>..<span class="id" title="var">T</span>}</span>  <br>
    <span class="inlinecode">―――――――――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//<span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">q.A</span></span>      
</div>
<div class="code">
| <a id="ty_sel_r" class="idref" href="#ty_sel_r"><span class="id" title="constructor">ty_sel_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:13" class="idref" href="#G:13"><span class="id" title="binder">G</span></a> <a id="p:14" class="idref" href="#p:14"><span class="id" title="binder">p</span></a> <a id="T:15" class="idref" href="#T:15"><span class="id" title="binder">T</span></a> <a id="q:16" class="idref" href="#q:16"><span class="id" title="binder">q</span></a> <a id="S:17" class="idref" href="#S:17"><span class="id" title="binder">S</span></a> <a id="A:18" class="idref" href="#A:18"><span class="id" title="binder">A</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:13"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:14"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:15"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:13"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:16"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#S:17"><span class="id" title="variable">S</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:18"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:15"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:15"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:13"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:14"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#q:16"><span class="id" title="variable">q</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A:18"><span class="id" title="variable">A</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p.a</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>    <br>
    <span class="inlinecode">―――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>}</span>     
</div>
<div class="code">
| <a id="ty_rcd_intro_r" class="idref" href="#ty_rcd_intro_r"><span class="id" title="constructor">ty_rcd_intro_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:19" class="idref" href="#G:19"><span class="id" title="binder">G</span></a> <a id="p:20" class="idref" href="#p:20"><span class="id" title="binder">p</span></a> <a id="a:21" class="idref" href="#a:21"><span class="id" title="binder">a</span></a> <a id="T:22" class="idref" href="#T:22"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:19"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:20"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ReplacementTyping.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:22"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:19"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:20"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">{</span></a> <a class="idref" href="ReplacementTyping.html#a:21"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">⦂</span></a> <a class="idref" href="ReplacementTyping.html#T:22"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">}</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!</span> <span class="inlinecode"><span class="id" title="var">q</span></span>                   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">r</span>:</span> <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">T</span>)</span>             <br>
    <span class="inlinecode">――――――――――――――――――――</span>      <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">μ</span>(<span class="id" title="var">T</span>[<span class="id" title="var">q</span>/<span class="id" title="var">p</span>])</span>      
</div>
<div class="code">
<br/>
| <a id="ty_rec_qp_r" class="idref" href="#ty_rec_qp_r"><span class="id" title="constructor">ty_rec_qp_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:23" class="idref" href="#G:23"><span class="id" title="binder">G</span></a> <a id="p:24" class="idref" href="#p:24"><span class="id" title="binder">p</span></a> <a id="q:25" class="idref" href="#q:25"><span class="id" title="binder">q</span></a> <a id="r:26" class="idref" href="#r:26"><span class="id" title="binder">r</span></a> <a id="T:27" class="idref" href="#T:27"><span class="id" title="binder">T</span></a> <a id="T':28" class="idref" href="#T':28"><span class="id" title="binder">T'</span></a> <a id="U:29" class="idref" href="#U:29"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:23"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p:24"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:25"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:25"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:23"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q:25"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:29"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:23"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r:26"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T:27"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:25"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p:24"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T:27"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':28"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:23"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r:26"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T':28"><span class="id" title="variable">T'</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!</span> <span class="inlinecode"><span class="id" title="var">q</span></span>                   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">r</span>:</span> <span class="inlinecode"><span class="id" title="var">r'.A</span></span>             <br>x
    <span class="inlinecode">――――――――――――――――――――</span>      <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">(<span class="id" title="var">r'.A</span>)[<span class="id" title="var">q</span>/<span class="id" title="var">p</span>]</span>      
</div>
<div class="code">
| <a id="ty_sel_qp_r" class="idref" href="#ty_sel_qp_r"><span class="id" title="constructor">ty_sel_qp_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:30" class="idref" href="#G:30"><span class="id" title="binder">G</span></a> <a id="p:31" class="idref" href="#p:31"><span class="id" title="binder">p</span></a> <a id="q:32" class="idref" href="#q:32"><span class="id" title="binder">q</span></a> <a id="r:33" class="idref" href="#r:33"><span class="id" title="binder">r</span></a> <a id="A:34" class="idref" href="#A:34"><span class="id" title="binder">A</span></a> <a id="bs:35" class="idref" href="#bs:35"><span class="id" title="binder">bs</span></a> <a id="U:36" class="idref" href="#U:36"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:30"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p:31"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:32"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:32"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:30"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q:32"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:36"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:30"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r:33"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">(</span></a><a class="idref" href="ReplacementTyping.html#q:32"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <a class="idref" href="ReplacementTyping.html#bs:35"><span class="id" title="variable">bs</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">)↓</span></a><a class="idref" href="ReplacementTyping.html#A:34"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:30"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r:33"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">(</span></a><a class="idref" href="ReplacementTyping.html#p:31"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <a class="idref" href="ReplacementTyping.html#bs:35"><span class="id" title="variable">bs</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">)↓</span></a><a class="idref" href="ReplacementTyping.html#A:34"><span class="id" title="variable">A</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span> <span class="inlinecode">⪼</span> <span class="inlinecode"><span class="id" title="var">q.type</span></span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!</span> <span class="inlinecode"><span class="id" title="var">q</span></span>                   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">r</span>:</span> <span class="inlinecode"><span class="id" title="var">r'.type</span></span>          <br>
    <span class="inlinecode">――――――――――――――――――――</span>      <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">(<span class="id" title="var">r'.type</span>)[<span class="id" title="var">q</span>/<span class="id" title="var">p</span>]</span>      
</div>
<div class="code">
| <a id="ty_sngl_qp_r" class="idref" href="#ty_sngl_qp_r"><span class="id" title="constructor">ty_sngl_qp_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:37" class="idref" href="#G:37"><span class="id" title="binder">G</span></a> <a id="p:38" class="idref" href="#p:38"><span class="id" title="binder">p</span></a> <a id="q:39" class="idref" href="#q:39"><span class="id" title="binder">q</span></a> <a id="r:40" class="idref" href="#r:40"><span class="id" title="binder">r</span></a> <a id="bs:41" class="idref" href="#bs:41"><span class="id" title="binder">bs</span></a> <a id="U:42" class="idref" href="#U:42"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:37"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p:38"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:39"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:39"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:37"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q:39"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:42"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:37"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r:40"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:39"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <a class="idref" href="ReplacementTyping.html#bs:41"><span class="id" title="variable">bs</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:37"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#r:40"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#p:38"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <a class="idref" href="ReplacementTyping.html#bs:41"><span class="id" title="variable">bs</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span></span>   <br>
    <span class="inlinecode">―――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">top</span></span>     
</div>
<div class="code">
| <a id="ty_top_r" class="idref" href="#ty_top_r"><span class="id" title="constructor">ty_top_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:43" class="idref" href="#G:43"><span class="id" title="binder">G</span></a> <a id="p:44" class="idref" href="#p:44"><span class="id" title="binder">p</span></a> <a id="T:45" class="idref" href="#T:45"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:43"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:44"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:45"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:43"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:44"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>}</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>     <br>
    <span class="inlinecode">――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">a</span>:</span> <span class="inlinecode"><span class="id" title="var">U</span>}</span>     
</div>
<div class="code">
<br/>
| <a id="ty_dec_trm_r" class="idref" href="#ty_dec_trm_r"><span class="id" title="constructor">ty_dec_trm_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:46" class="idref" href="#G:46"><span class="id" title="binder">G</span></a> <a id="p:47" class="idref" href="#p:47"><span class="id" title="binder">p</span></a> <a id="a:48" class="idref" href="#a:48"><span class="id" title="binder">a</span></a> <a id="T:49" class="idref" href="#T:49"><span class="id" title="binder">T</span></a> <a id="U:50" class="idref" href="#U:50"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:46"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:47"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#a:48"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">⦂</span></a> <a class="idref" href="ReplacementTyping.html#T:49"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:46"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#T:49"><span class="id" title="variable">T</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#U:50"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:46"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:47"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#a:48"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">⦂</span></a> <a class="idref" href="ReplacementTyping.html#U:50"><span class="id" title="variable">U</span></a><a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">}</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">T1</span>..<span class="id" title="var">S1</span>}</span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">T2</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T1</span></span>         <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">S1</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">S2</span></span>         <br>
    <span class="inlinecode">―――――――――――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">T2</span>..<span class="id" title="var">S2</span>}</span>     
</div>
<div class="code">
<br/>
| <a id="ty_dec_typ_r" class="idref" href="#ty_dec_typ_r"><span class="id" title="constructor">ty_dec_typ_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:51" class="idref" href="#G:51"><span class="id" title="binder">G</span></a> <a id="p:52" class="idref" href="#p:52"><span class="id" title="binder">p</span></a> <a id="A:53" class="idref" href="#A:53"><span class="id" title="binder">A</span></a> <a id="T1:54" class="idref" href="#T1:54"><span class="id" title="binder">T1</span></a> <a id="T2:55" class="idref" href="#T2:55"><span class="id" title="binder">T2</span></a> <a id="S1:56" class="idref" href="#S1:56"><span class="id" title="binder">S1</span></a> <a id="S2:57" class="idref" href="#S2:57"><span class="id" title="binder">S2</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:51"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:52"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:53"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T1:54"><span class="id" title="variable">T1</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#S1:56"><span class="id" title="variable">S1</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:51"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#T2:55"><span class="id" title="variable">T2</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T1:54"><span class="id" title="variable">T1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:51"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#S1:56"><span class="id" title="variable">S1</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#S2:57"><span class="id" title="variable">S2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:51"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:52"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:53"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T2:55"><span class="id" title="variable">T2</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#S2:57"><span class="id" title="variable">S2</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a><br/>
<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S1</span>)<span class="id" title="var">T1</span></span>          <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">S2</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">S1</span></span>            <br>
    <span class="inlinecode"><span class="id" title="var">G</span>,</span> <span class="inlinecode"><span class="id" title="var">y</span>:</span> <span class="inlinecode"><span class="id" title="var">S2</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T1</span>^<span class="id" title="var">y</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T2</span>^<span class="id" title="var">y</span></span>   <br>
    <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><span class="id" title="tactic">fresh</span></span>                  <br>
    <span class="inlinecode">――――――――――――――――――――――</span>   <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S'</span>)<span class="id" title="var">T'</span></span>            
</div>
<div class="code">
| <a id="ty_all_r" class="idref" href="#ty_all_r"><span class="id" title="constructor">ty_all_r</span></a> : <span class="id" title="keyword">∀</span> <a id="G:58" class="idref" href="#G:58"><span class="id" title="binder">G</span></a> <a id="T1:59" class="idref" href="#T1:59"><span class="id" title="binder">T1</span></a> <a id="T2:60" class="idref" href="#T2:60"><span class="id" title="binder">T2</span></a> <a id="S1:61" class="idref" href="#S1:61"><span class="id" title="binder">S1</span></a> <a id="S2:62" class="idref" href="#S2:62"><span class="id" title="binder">S2</span></a> <a id="L:63" class="idref" href="#L:63"><span class="id" title="binder">L</span></a> <a id="p:64" class="idref" href="#p:64"><span class="id" title="binder">p</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:58"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:64"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="ReplacementTyping.html#S1:61"><span class="id" title="variable">S1</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="ReplacementTyping.html#T1:59"><span class="id" title="variable">T1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:58"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#S2:62"><span class="id" title="variable">S2</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#S1:61"><span class="id" title="variable">S1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="y:65" class="idref" href="#y:65"><span class="id" title="binder">y</span></a>, <a class="idref" href="ReplacementTyping.html#y:65"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="ReplacementTyping.html#L:63"><span class="id" title="variable">L</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:58"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="ReplacementTyping.html#y:65"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="ReplacementTyping.html#S2:62"><span class="id" title="variable">S2</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="ReplacementTyping.html#y:65"><span class="id" title="variable">y</span></a> <a class="idref" href="ReplacementTyping.html#T1:59"><span class="id" title="variable">T1</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="ReplacementTyping.html#y:65"><span class="id" title="variable">y</span></a> <a class="idref" href="ReplacementTyping.html#T2:60"><span class="id" title="variable">T2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:58"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:64"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="ReplacementTyping.html#S2:62"><span class="id" title="variable">S2</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="ReplacementTyping.html#T2:60"><span class="id" title="variable">T2</span></a><br/>
<br/>
<span class="id" title="keyword">where</span> <a id="f994db89abe75a68d8217ed0d83f3051" class="idref" href="#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">&quot;</span></a>G '⊢//' p ':' T" := (<a class="idref" href="ReplacementTyping.html#ty_repl:2"><span class="id" title="inductive">ty_repl</span></a> <span class="id" title="var">G</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="ReplacementTyping.html#ty_repl"><span class="id" title="inductive">ty_repl</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab64"></a><h3 class="section">From Replacement To Precise Typing</h3>

<div class="paragraph"> </div>

 Replacement-to-precise typing for function types:
    if <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S</span>)<span class="id" title="var">T</span></span> then
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">S'</span>,</span> <span class="inlinecode"><span class="id" title="var">T'</span>.</span> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢!!!</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span>(<span class="id" title="var">S'</span>)<span class="id" title="var">T'</span></span>,

</li>
<li> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">S'</span></span>, and

</li>
<li> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢#</span> <span class="inlinecode"><span class="id" title="var">T'</span>^<span class="id" title="var">y</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span>^<span class="id" title="var">y</span></span>,

</li>
</ul>
    where <span class="inlinecode"><span class="id" title="var">y</span></span> is fresh. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="repl_to_precise_typ_all" class="idref" href="#repl_to_precise_typ_all"><span class="id" title="lemma">repl_to_precise_typ_all</span></a>: <span class="id" title="keyword">∀</span> <a id="G:66" class="idref" href="#G:66"><span class="id" title="binder">G</span></a> <a id="p:67" class="idref" href="#p:67"><span class="id" title="binder">p</span></a> <a id="S:68" class="idref" href="#S:68"><span class="id" title="binder">S</span></a> <a id="T:69" class="idref" href="#T:69"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:66"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:66"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:67"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="ReplacementTyping.html#S:68"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="ReplacementTyping.html#T:69"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="S':70" class="idref" href="#S':70"><span class="id" title="binder">S'</span></a> <a id="T':71" class="idref" href="#T':71"><span class="id" title="binder">T'</span></a> <a id="L:72" class="idref" href="#L:72"><span class="id" title="binder">L</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:66"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:67"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="ReplacementTyping.html#S':70"><span class="id" title="variable">S'</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="ReplacementTyping.html#T':71"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:66"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#S:68"><span class="id" title="variable">S</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#S':70"><span class="id" title="variable">S'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="y:73" class="idref" href="#y:73"><span class="id" title="binder">y</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#y:73"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="ReplacementTyping.html#L:72"><span class="id" title="variable">L</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:66"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="ReplacementTyping.html#y:73"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="ReplacementTyping.html#S:68"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="ReplacementTyping.html#y:73"><span class="id" title="variable">y</span></a> <a class="idref" href="ReplacementTyping.html#T':71"><span class="id" title="variable">T'</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="ReplacementTyping.html#y:73"><span class="id" title="variable">y</span></a> <a class="idref" href="ReplacementTyping.html#T:69"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#invertible_to_precise_typ_all"><span class="id" title="lemma">invertible_to_precise_typ_all</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">S'</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">L'</span> [<span class="id" title="var">Hp'</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span>  <span class="id" title="var">S'</span> <span class="id" title="var">T'</span> (<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L'</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>). <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">Hs</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Subenvironments.html#subenv_last"><span class="id" title="lemma">subenv_last</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="constructor">ok_push</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement-to-precise typing for records:
    if <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">|-//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">S</span>..<span class="id" title="var">U</span>}</span> then
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="tactic">∃</span></span> <span class="inlinecode"><span class="id" title="var">T</span>.</span> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">|-//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode">{<span class="id" title="var">A</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>..<span class="id" title="var">T</span>}</span>,

</li>
<li> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">&vdash;<sub>&#35;</sub></span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>, and

</li>
<li> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">&vdash;<sub>&#35;</sub></span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> 

</li>
</ul>
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="repl_to_precise_rcd" class="idref" href="#repl_to_precise_rcd"><span class="id" title="lemma">repl_to_precise_rcd</span></a>: <span class="id" title="keyword">∀</span> <a id="G:74" class="idref" href="#G:74"><span class="id" title="binder">G</span></a> <a id="p:75" class="idref" href="#p:75"><span class="id" title="binder">p</span></a> <a id="A:76" class="idref" href="#A:76"><span class="id" title="binder">A</span></a> <a id="S:77" class="idref" href="#S:77"><span class="id" title="binder">S</span></a> <a id="U:78" class="idref" href="#U:78"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:74"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:74"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:75"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:76"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#S:77"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#U:78"><span class="id" title="variable">U</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="T:79" class="idref" href="#T:79"><span class="id" title="binder">T</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:74"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:75"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:76"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:79"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:79"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:74"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#T:79"><span class="id" title="variable">T</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#U:78"><span class="id" title="variable">U</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:74"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#S:77"><span class="id" title="variable">S</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:79"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">HG</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#invertible_to_precise_rcd"><span class="id" title="lemma">invertible_to_precise_rcd</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HG</span> <span class="id" title="constructor">eq_refl</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> [<span class="id" title="var">Hx</span> [<span class="id" title="var">Hs1</span> <span class="id" title="var">Hs2</span>]]]. <span class="id" title="tactic">∃</span> <span class="id" title="var">V</span>. <span class="id" title="tactic">split</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab65"></a><h3 class="section">Properties of replacement typing</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="repl_and" class="idref" href="#repl_and"><span class="id" title="lemma">repl_and</span></a>: <span class="id" title="keyword">∀</span> <a id="G:80" class="idref" href="#G:80"><span class="id" title="binder">G</span></a> <a id="p:81" class="idref" href="#p:81"><span class="id" title="binder">p</span></a> <a id="T:82" class="idref" href="#T:82"><span class="id" title="binder">T</span></a> <a id="U:83" class="idref" href="#U:83"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:80"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:80"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:81"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:82"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ReplacementTyping.html#U:83"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:80"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:81"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:82"><span class="id" title="variable">T</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G:80"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:81"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:83"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="InvertibleTyping.html#invertible_and"><span class="id" title="lemma">invertible_and</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">split</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">qp</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_qp" class="idref" href="#replacement_repl_closure_qp"><span class="id" title="lemma">replacement_repl_closure_qp</span></a> : <span class="id" title="keyword">∀</span> <a id="G:84" class="idref" href="#G:84"><span class="id" title="binder">G</span></a> <a id="p:85" class="idref" href="#p:85"><span class="id" title="binder">p</span></a> <a id="q:86" class="idref" href="#q:86"><span class="id" title="binder">q</span></a> <a id="r:87" class="idref" href="#r:87"><span class="id" title="binder">r</span></a> <a id="T:88" class="idref" href="#T:88"><span class="id" title="binder">T</span></a> <a id="T':89" class="idref" href="#T':89"><span class="id" title="binder">T'</span></a> <a id="U:90" class="idref" href="#U:90"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:84"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:84"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:86"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:87"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:87"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:84"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:87"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:90"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:84"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:85"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:88"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#r:87"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#q:86"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#T:88"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':89"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:84"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:85"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':89"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span> 5].<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span> 5].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">SCase</span> "ty_precise_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#pt3_inertsngl"><span class="id" title="lemma">pt3_inertsngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hit</span> | <span class="id" title="var">Hs</span>] | <span class="id" title="var">Hst</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SSCase</span> "ty_precise_inv_1"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hit</span>; <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_r"><span class="id" title="constructor">ty_all_r</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="notation">\{}</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>. <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_r"><span class="id" title="constructor">ty_all_r</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>. <span class="id" title="tactic">auto</span>. <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_qp"><span class="id" title="constructor">subtyp_sngl_qp</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#ty_rec_qp_r"><span class="id" title="constructor">ty_rec_qp_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SSCase</span> "ty_precise_inv_2"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hs</span>. <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_sngl_qp_r"><span class="id" title="constructor">ty_sngl_qp_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">SSCase</span> "ty_precise_inv_3"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hst</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">Hx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">T'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hx</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> <span class="id" title="var">D2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hts</span> : <span class="id" title="var">G</span> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <span class="id" title="var">t0</span> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hts</span> : <span class="id" title="var">G</span> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <span class="id" title="var">T1</span> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eauto</span>. } <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_dec_trm_r"><span class="id" title="constructor">ty_dec_trm_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpt0</span> : <span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <span class="id" title="var">p</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <span class="id" title="var">T</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct1"><span class="id" title="lemma">pt3_and_destruct1</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpd</span> : <span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <span class="id" title="var">p</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <span class="id" title="var">D</span><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct2"><span class="id" title="lemma">pt3_and_destruct2</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#ty_and_r"><span class="id" title="constructor">ty_and_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpt0</span> : <span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <span class="id" title="var">p</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <span class="id" title="var">T</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct1"><span class="id" title="lemma">pt3_and_destruct1</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Hpd</span> : <span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <span class="id" title="var">p</span> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">(</span></a><a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <span class="id" title="var">D</span><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct2"><span class="id" title="lemma">pt3_and_destruct2</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_and_r"><span class="id" title="constructor">ty_and_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">D2</span>; <span class="id" title="var">invert_repl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_dec_typ_r"><span class="id" title="constructor">ty_dec_typ_r</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_dec_typ_r"><span class="id" title="constructor">ty_dec_typ_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_dec_trm_r"><span class="id" title="constructor">ty_dec_trm_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">SCase</span> "ty_sel_qp_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="InvertibleTyping.html#ty_sel_pq_inv"><span class="id" title="constructor">ty_sel_pq_inv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_sel_qp_r"><span class="id" title="constructor">ty_sel_qp_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">SCase</span> "ty_sngl_qp_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="InvertibleTyping.html#ty_sngl_pq_inv"><span class="id" title="constructor">ty_sngl_pq_inv</span></a> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H5</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_sngl_qp_r"><span class="id" title="constructor">ty_sngl_qp_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> (<a class="idref" href="Definitions.html#rpath"><span class="id" title="constructor">rpath</span></a> <span class="id" title="var">q</span> <span class="id" title="var">p</span> <span class="id" title="var">bs</span> <span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHHp</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_sel_qp_r"><span class="id" title="constructor">ty_sel_qp_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sngl_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H0</span> (<a class="idref" href="Definitions.html#rsngl"><span class="id" title="constructor">rsngl</span></a> <span class="id" title="var">q</span> <span class="id" title="var">p</span> <span class="id" title="var">bs</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHHp</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_sngl_qp_r"><span class="id" title="constructor">ty_sngl_qp_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_dec_trm_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_dec_trm_r"><span class="id" title="constructor">ty_dec_trm_r</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_dec_typ_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_dec_typ_r"><span class="id" title="constructor">ty_dec_typ_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_pq_t"><span class="id" title="constructor">subtyp_sngl_pq_t</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_qp_t"><span class="id" title="constructor">subtyp_sngl_qp_t</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_all_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_r"><span class="id" title="constructor">ty_all_r</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>); <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_pq_t"><span class="id" title="constructor">subtyp_sngl_pq_t</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_pq_t"><span class="id" title="constructor">subtyp_sngl_pq_t</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_r"><span class="id" title="constructor">ty_all_r</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>); <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_qp"><span class="id" title="constructor">subtyp_sngl_qp</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H6</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">qp</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s II-level precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_qp2" class="idref" href="#replacement_repl_closure_qp2"><span class="id" title="lemma">replacement_repl_closure_qp2</span></a> : <span class="id" title="keyword">∀</span> <a id="G:91" class="idref" href="#G:91"><span class="id" title="binder">G</span></a> <a id="p:92" class="idref" href="#p:92"><span class="id" title="binder">p</span></a> <a id="q:93" class="idref" href="#q:93"><span class="id" title="binder">q</span></a> <a id="r:94" class="idref" href="#r:94"><span class="id" title="binder">r</span></a> <a id="T:95" class="idref" href="#T:95"><span class="id" title="binder">T</span></a> <a id="T':96" class="idref" href="#T':96"><span class="id" title="binder">T'</span></a> <a id="U:97" class="idref" href="#U:97"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:91"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:91"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q:93"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:94"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:91"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:94"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:97"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:91"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:92"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:95"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#r:94"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#q:93"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#T:95"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':96"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:91"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:92"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':96"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">gen</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp"><span class="id" title="lemma">replacement_repl_closure_qp</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Replacement.html#repl_field_elim"><span class="id" title="lemma">repl_field_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_backtrack"><span class="id" title="lemma">pt2_backtrack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> <span class="id" title="var">Hq</span>]. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">qp</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s III-level precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_qp3" class="idref" href="#replacement_repl_closure_qp3"><span class="id" title="lemma">replacement_repl_closure_qp3</span></a> : <span class="id" title="keyword">∀</span> <a id="G:98" class="idref" href="#G:98"><span class="id" title="binder">G</span></a> <a id="p:99" class="idref" href="#p:99"><span class="id" title="binder">p</span></a> <a id="q:100" class="idref" href="#q:100"><span class="id" title="binder">q</span></a> <a id="r:101" class="idref" href="#r:101"><span class="id" title="binder">r</span></a> <a id="T:102" class="idref" href="#T:102"><span class="id" title="binder">T</span></a> <a id="T':103" class="idref" href="#T':103"><span class="id" title="binder">T'</span></a> <a id="U:104" class="idref" href="#U:104"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:98"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:98"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q:100"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:101"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:98"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:101"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:104"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:98"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:99"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:102"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#r:101"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#q:100"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#T:102"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':103"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:98"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:99"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':103"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2"><span class="id" title="lemma">replacement_repl_closure_qp2</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_insert"><span class="id" title="lemma">repl_insert</span></a> <span class="id" title="var">q</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">V</span> [<span class="id" title="var">Hr1</span> <span class="id" title="var">Hr2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr1</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr'</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2"><span class="id" title="lemma">replacement_repl_closure_qp2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHq</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under repeated <span class="inlinecode"><span class="id" title="var">qp</span></span> replacements 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_qp_comp" class="idref" href="#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a>: <span class="id" title="keyword">∀</span> <a id="G:105" class="idref" href="#G:105"><span class="id" title="binder">G</span></a> <a id="p:106" class="idref" href="#p:106"><span class="id" title="binder">p</span></a> <a id="q:107" class="idref" href="#q:107"><span class="id" title="binder">q</span></a> <a id="r:108" class="idref" href="#r:108"><span class="id" title="binder">r</span></a> <a id="T:109" class="idref" href="#T:109"><span class="id" title="binder">T</span></a> <a id="T':110" class="idref" href="#T':110"><span class="id" title="binder">T'</span></a> <a id="U:111" class="idref" href="#U:111"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:105"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:105"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:106"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:109"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:105"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q:107"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:108"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:105"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:108"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:111"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <a class="idref" href="ReplacementTyping.html#r:108"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#q:107"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#T:109"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':110"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:105"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:106"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':110"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hc</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hc</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHc</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp3"><span class="id" title="lemma">replacement_repl_closure_qp3</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_pq_helper_mutind" class="idref" href="#replacement_repl_closure_pq_helper_mutind"><span class="id" title="lemma">replacement_repl_closure_pq_helper_mutind</span></a>: <span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="q:112" class="idref" href="#q:112"><span class="id" title="binder">q</span></a> <a id="p:113" class="idref" href="#p:113"><span class="id" title="binder">p</span></a> <a id="T:114" class="idref" href="#T:114"><span class="id" title="binder">T</span></a> <a id="T':115" class="idref" href="#T':115"><span class="id" title="binder">T'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:112"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p:113"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T:114"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':115"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="q0:116" class="idref" href="#q0:116"><span class="id" title="binder">q0</span></a> <a id="r0:117" class="idref" href="#r0:117"><span class="id" title="binder">r0</span></a> <a id="T2:118" class="idref" href="#T2:118"><span class="id" title="binder">T2</span></a> <a id="G:119" class="idref" href="#G:119"><span class="id" title="binder">G</span></a>, <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q0:116"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0:117"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#T':115"><span class="id" title="variable">T'</span></a> <a class="idref" href="ReplacementTyping.html#T2:118"><span class="id" title="variable">T2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:119"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:119"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p:113"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:112"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:112"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:119"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q0:116"><span class="id" title="variable">q0</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0:117"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0:117"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#T:114"><span class="id" title="variable">T</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#T2:118"><span class="id" title="variable">T2</span></a> <span class="id" title="notation">∨</span> <span class="id" title="notation">∃</span> <a id="T3:120" class="idref" href="#T3:120"><span class="id" title="binder">T3</span></a><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q0:116"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0:117"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#T:114"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T3:120"><span class="id" title="variable">T3</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:112"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p:113"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T3:120"><span class="id" title="variable">T3</span></a> <a class="idref" href="ReplacementTyping.html#T2:118"><span class="id" title="variable">T2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="q:121" class="idref" href="#q:121"><span class="id" title="binder">q</span></a> <a id="p:122" class="idref" href="#p:122"><span class="id" title="binder">p</span></a> <a id="D:123" class="idref" href="#D:123"><span class="id" title="binder">D</span></a> <a id="D':124" class="idref" href="#D':124"><span class="id" title="binder">D'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="ReplacementTyping.html#q:121"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p:122"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#D:123"><span class="id" title="variable">D</span></a> <a class="idref" href="ReplacementTyping.html#D':124"><span class="id" title="variable">D'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="q0:125" class="idref" href="#q0:125"><span class="id" title="binder">q0</span></a> <a id="r0:126" class="idref" href="#r0:126"><span class="id" title="binder">r0</span></a> <a id="D2:127" class="idref" href="#D2:127"><span class="id" title="binder">D2</span></a> <a id="G:128" class="idref" href="#G:128"><span class="id" title="binder">G</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="ReplacementTyping.html#q0:125"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0:126"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#D':124"><span class="id" title="variable">D'</span></a> <a class="idref" href="ReplacementTyping.html#D2:127"><span class="id" title="variable">D2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:128"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:128"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p:122"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:121"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:121"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:128"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q0:125"><span class="id" title="variable">q0</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0:126"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0:126"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#D:123"><span class="id" title="variable">D</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#D2:127"><span class="id" title="variable">D2</span></a> <span class="id" title="notation">∨</span> <span class="id" title="notation">∃</span> <a id="D3:129" class="idref" href="#D3:129"><span class="id" title="binder">D3</span></a><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="ReplacementTyping.html#q0:125"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0:126"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#D:123"><span class="id" title="variable">D</span></a> <a class="idref" href="ReplacementTyping.html#D3:129"><span class="id" title="variable">D3</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="ReplacementTyping.html#q:121"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p:122"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#D3:129"><span class="id" title="variable">D3</span></a> <a class="idref" href="ReplacementTyping.html#D2:127"><span class="id" title="variable">D2</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#repl_mutind"><span class="id" title="definition">repl_mutind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H7</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">D4</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <span class="id" title="var">D4</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T5</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<span class="id" title="var">T5</span> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <span class="id" title="var">U</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="var">T1</span> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <span class="id" title="var">T4</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="var">T4</span> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <span class="id" title="var">T1</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T5</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="var">U</span> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <span class="id" title="var">T5</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs</span> <span class="id" title="notation">=</span> <span class="id" title="var">r0</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_sel_unique"><span class="id" title="lemma">pf_sngl_sel_unique</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H7</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T5</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <span class="id" title="var">T5</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T5</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">(</span></a><span class="id" title="var">T5</span><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <span class="id" title="var">U</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">(</span></a><span class="id" title="var">T1</span><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <span class="id" title="var">T4</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">(</span></a><span class="id" title="var">T4</span><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <span class="id" title="var">T1</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T5</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">(</span></a><span class="id" title="var">U</span><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <span class="id" title="var">T5</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs</span> <span class="id" title="notation">=</span> <span class="id" title="var">r0</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_sel_unique"><span class="id" title="lemma">pf_sngl_sel_unique</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H10</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T4</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#dec_typ"><span class="id" title="constructor">dec_typ</span></a> <span class="id" title="var">A</span> <span class="id" title="var">T4</span> <span class="id" title="var">U</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#dec_typ"><span class="id" title="constructor">dec_typ</span></a> <span class="id" title="var">A</span> <span class="id" title="var">T1</span> <span class="id" title="var">T3</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">right</span>. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#dec_typ"><span class="id" title="constructor">dec_typ</span></a> <span class="id" title="var">A</span> <span class="id" title="var">T3</span> <span class="id" title="var">T1</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H10</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T4</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#dec_typ"><span class="id" title="constructor">dec_typ</span></a> <span class="id" title="var">A</span> <span class="id" title="var">U</span> <span class="id" title="var">T4</span>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H9</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T4</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]]. <span class="id" title="tactic">∃</span> (<a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">⦂</span></a> <span class="id" title="var">T4</span><a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">}</span></a>). <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_pq_helper" class="idref" href="#replacement_repl_closure_pq_helper"><span class="id" title="lemma">replacement_repl_closure_pq_helper</span></a>: <span class="id" title="keyword">∀</span> <a id="p:130" class="idref" href="#p:130"><span class="id" title="binder">p</span></a> <a id="q:131" class="idref" href="#q:131"><span class="id" title="binder">q</span></a> <a id="T:132" class="idref" href="#T:132"><span class="id" title="binder">T</span></a> <a id="T':133" class="idref" href="#T':133"><span class="id" title="binder">T'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:131"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p:130"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T:132"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':133"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="q0:134" class="idref" href="#q0:134"><span class="id" title="binder">q0</span></a> <a id="r0:135" class="idref" href="#r0:135"><span class="id" title="binder">r0</span></a> <a id="T2:136" class="idref" href="#T2:136"><span class="id" title="binder">T2</span></a> <a id="G:137" class="idref" href="#G:137"><span class="id" title="binder">G</span></a>, <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q0:134"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0:135"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#T':133"><span class="id" title="variable">T'</span></a> <a class="idref" href="ReplacementTyping.html#T2:136"><span class="id" title="variable">T2</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:137"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:137"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p:130"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:131"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:131"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:137"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q0:134"><span class="id" title="variable">q0</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0:135"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r0:135"><span class="id" title="variable">r0</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#T:132"><span class="id" title="variable">T</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#T2:136"><span class="id" title="variable">T2</span></a> <span class="id" title="notation">∨</span> <span class="id" title="notation">∃</span> <a id="T3:138" class="idref" href="#T3:138"><span class="id" title="binder">T3</span></a><span class="id" title="notation">,</span> <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q0:134"><span class="id" title="variable">q0</span></a> <a class="idref" href="ReplacementTyping.html#r0:135"><span class="id" title="variable">r0</span></a> <a class="idref" href="ReplacementTyping.html#T:132"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T3:138"><span class="id" title="variable">T3</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:131"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p:130"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T3:138"><span class="id" title="variable">T3</span></a> <a class="idref" href="ReplacementTyping.html#T2:136"><span class="id" title="variable">T2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_helper_mutind"><span class="id" title="lemma">replacement_repl_closure_pq_helper_mutind</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="invertible_repl_closure_helper" class="idref" href="#invertible_repl_closure_helper"><span class="id" title="lemma">invertible_repl_closure_helper</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="D:139" class="idref" href="#D:139"><span class="id" title="binder">D</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_dec"><span class="id" title="inductive">record_dec</span></a> <a class="idref" href="ReplacementTyping.html#D:139"><span class="id" title="variable">D</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <a id="G:140" class="idref" href="#G:140"><span class="id" title="binder">G</span></a> <a id="p:141" class="idref" href="#p:141"><span class="id" title="binder">p</span></a> <a id="q:142" class="idref" href="#q:142"><span class="id" title="binder">q</span></a> <a id="r:143" class="idref" href="#r:143"><span class="id" title="binder">r</span></a> <a id="D':144" class="idref" href="#D':144"><span class="id" title="binder">D'</span></a> <a id="U:145" class="idref" href="#U:145"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:140"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:140"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:141"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="ReplacementTyping.html#D:139"><span class="id" title="variable">D</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:140"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:142"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:143"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:143"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:140"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:143"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:145"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="ReplacementTyping.html#q:142"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:143"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#D:139"><span class="id" title="variable">D</span></a> <a class="idref" href="ReplacementTyping.html#D':144"><span class="id" title="variable">D'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:140"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:141"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="ReplacementTyping.html#D':144"><span class="id" title="variable">D'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="U:146" class="idref" href="#U:146"><span class="id" title="binder">U</span></a> <a id="ls:147" class="idref" href="#ls:147"><span class="id" title="binder">ls</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_typ"><span class="id" title="inductive">record_typ</span></a> <a class="idref" href="ReplacementTyping.html#U:146"><span class="id" title="variable">U</span></a> <a class="idref" href="ReplacementTyping.html#ls:147"><span class="id" title="variable">ls</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <a id="G:148" class="idref" href="#G:148"><span class="id" title="binder">G</span></a> <a id="p:149" class="idref" href="#p:149"><span class="id" title="binder">p</span></a> <a id="q:150" class="idref" href="#q:150"><span class="id" title="binder">q</span></a> <a id="r:151" class="idref" href="#r:151"><span class="id" title="binder">r</span></a> <a id="U':152" class="idref" href="#U':152"><span class="id" title="binder">U'</span></a> <a id="V:153" class="idref" href="#V:153"><span class="id" title="binder">V</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:148"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:148"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:149"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:146"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:148"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:150"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:151"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:151"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:148"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:151"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#V:153"><span class="id" title="variable">V</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:150"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:151"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#U:146"><span class="id" title="variable">U</span></a> <a class="idref" href="ReplacementTyping.html#U':152"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:148"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:149"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U':152"><span class="id" title="variable">U'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="U:154" class="idref" href="#U:154"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert_typ"><span class="id" title="inductive">inert_typ</span></a> <a class="idref" href="ReplacementTyping.html#U:154"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <a id="G:155" class="idref" href="#G:155"><span class="id" title="binder">G</span></a> <a id="p:156" class="idref" href="#p:156"><span class="id" title="binder">p</span></a> <a id="q:157" class="idref" href="#q:157"><span class="id" title="binder">q</span></a> <a id="r:158" class="idref" href="#r:158"><span class="id" title="binder">r</span></a> <a id="U':159" class="idref" href="#U':159"><span class="id" title="binder">U'</span></a> <a id="V:160" class="idref" href="#V:160"><span class="id" title="binder">V</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:155"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:155"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:156"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:154"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:155"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:157"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:158"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:158"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:155"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:158"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#V:160"><span class="id" title="variable">V</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:157"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:158"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#U:154"><span class="id" title="variable">U</span></a> <a class="idref" href="ReplacementTyping.html#U':159"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:155"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:156"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U':159"><span class="id" title="variable">U'</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#rcd_mutind"><span class="id" title="definition">rcd_mutind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_dec_typ_r"><span class="id" title="constructor">ty_dec_typ_r</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_repl_sub</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_repl_sub</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_dec_trm_r"><span class="id" title="constructor">ty_dec_trm_r</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_dec_trm_r"><span class="id" title="constructor">ty_dec_trm_r</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_and_r"><span class="id" title="constructor">ty_and_r</span></a>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_and_destruct1"><span class="id" title="lemma">pt3_and_destruct1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct2"><span class="id" title="lemma">pt3_and_destruct2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct1"><span class="id" title="lemma">pt3_and_destruct1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt3_and_destruct2"><span class="id" title="lemma">pt3_and_destruct2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="var">H1</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_r"><span class="id" title="constructor">ty_all_r</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>). <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H9</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a> <span class="id" title="var">H2</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Ho</span>: (<a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="var">y</span> <span class="id" title="var">H9</span> <span class="id" title="var">Ht</span> <span class="id" title="var">Hs</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="Weakening.html#weaken_subtyp"><span class="id" title="lemma">weaken_subtyp</span></a>. <span class="id" title="var">solve_repl_sub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="constructor">ok_push</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Singleton-subtyping closure for invertible typing:
    If <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊢!</span> <span class="inlinecode"><span class="id" title="var">q</span>:</span> <span class="inlinecode"><span class="id" title="var">r.type</span></span> then <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>[<span class="id" title="var">r</span>/<span class="id" title="var">q</span>]</span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="invertible_repl_closure" class="idref" href="#invertible_repl_closure"><span class="id" title="lemma">invertible_repl_closure</span></a> : <span class="id" title="keyword">∀</span> <a id="G:161" class="idref" href="#G:161"><span class="id" title="binder">G</span></a> <a id="p:162" class="idref" href="#p:162"><span class="id" title="binder">p</span></a> <a id="q:163" class="idref" href="#q:163"><span class="id" title="binder">q</span></a> <a id="r:164" class="idref" href="#r:164"><span class="id" title="binder">r</span></a> <a id="T:165" class="idref" href="#T:165"><span class="id" title="binder">T</span></a> <a id="T':166" class="idref" href="#T':166"><span class="id" title="binder">T'</span></a> <a id="U:167" class="idref" href="#U:167"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:161"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:161"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="ReplacementTyping.html#p:162"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:165"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:161"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:163"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:164"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:164"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:161"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:164"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:167"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:163"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:164"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T:165"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':166"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:161"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:162"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':166"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hqr</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hrep</span>. <span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hrep</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_precise_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#pt3_inertsngl"><span class="id" title="lemma">pt3_inertsngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hin</span> | <span class="id" title="var">Hs</span>] | <span class="id" title="var">Hr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">inversions</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#invertible_repl_closure_helper"><span class="id" title="lemma">invertible_repl_closure_helper</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">inversions</span> <span class="id" title="var">Hs</span>. <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_sngl_pq_inv"><span class="id" title="constructor">ty_sngl_pq_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">inversions</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">eapply</span> (<span class="id" title="notation">proj32</span> <a class="idref" href="ReplacementTyping.html#invertible_repl_closure_helper"><span class="id" title="lemma">invertible_repl_closure_helper</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_pq_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_pq_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">∃</span> <a id="r''':169" class="idref" href="#r''':169"><span class="id" title="binder">r'''</span></a><span class="id" title="notation">,</span> <span class="id" title="var">T'</span> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#r''':168"><span class="id" title="variable">r'''</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><span class="id" title="var">A</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r'''</span> <span class="id" title="var">Heq</span>]. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_prefixes_sel"><span class="id" title="lemma">repl_prefixes_sel</span></a> <span class="id" title="var">Hrep</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">bs0</span> [<span class="id" title="var">He1</span> <span class="id" title="var">He2</span>]]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_sel_pq_inv"><span class="id" title="constructor">ty_sel_pq_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">p</span>:=<span class="id" title="var">q0</span>) (<span class="id" title="var">U</span>:=<span class="id" title="var">U0</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">He1</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_sel_pq_inv"><span class="id" title="constructor">ty_sel_pq_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sngl_qp_inv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="notation">∃</span> <a id="r''':171" class="idref" href="#r''':171"><span class="id" title="binder">r'''</span></a><span class="id" title="notation">,</span> <span class="id" title="var">T'</span> <span class="id" title="notation">=</span> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r''':170"><span class="id" title="variable">r'''</span></a><a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r'''</span> <span class="id" title="var">Heq</span>]. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_prefixes_sngl"><span class="id" title="lemma">repl_prefixes_sngl</span></a> <span class="id" title="var">Hrep</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">bs0</span> [<span class="id" title="var">He1</span> <span class="id" title="var">He2</span>]]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_sngl_pq_inv"><span class="id" title="constructor">ty_sngl_pq_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">p</span>:=<span class="id" title="var">q0</span>) (<span class="id" title="var">U</span>:=<span class="id" title="var">U0</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">He1</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_sngl_pq_inv"><span class="id" title="constructor">ty_sngl_pq_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_trans_trans"><span class="id" title="lemma">pt3_trans_trans</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hi</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">pq</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_pq" class="idref" href="#replacement_repl_closure_pq"><span class="id" title="lemma">replacement_repl_closure_pq</span></a> : <span class="id" title="keyword">∀</span> <a id="G:172" class="idref" href="#G:172"><span class="id" title="binder">G</span></a> <a id="p:173" class="idref" href="#p:173"><span class="id" title="binder">p</span></a> <a id="q:174" class="idref" href="#q:174"><span class="id" title="binder">q</span></a> <a id="r:175" class="idref" href="#r:175"><span class="id" title="binder">r</span></a> <a id="T:176" class="idref" href="#T:176"><span class="id" title="binder">T</span></a> <a id="T':177" class="idref" href="#T':177"><span class="id" title="binder">T'</span></a> <a id="U:178" class="idref" href="#U:178"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:172"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:172"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:173"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:176"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:172"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:174"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:175"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:175"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:172"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:175"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:178"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:174"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:175"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T:176"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':177"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:172"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:173"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':177"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hqr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#invertible_repl_closure"><span class="id" title="lemma">invertible_repl_closure</span></a>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_and_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_bnd_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="Replacement.html#repl_open"><span class="id" title="lemma">repl_open</span></a> <span class="id" title="var">p</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHp</span>. <span class="id" title="var">invert_repl</span>. <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_flds_elim"><span class="id" title="lemma">pf_sngl_flds_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Binding.html#field_sel_nil"><span class="id" title="lemma">field_sel_nil</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_T_unique"><span class="id" title="lemma">pf_T_unique</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_U"><span class="id" title="lemma">pf_sngl_U</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rcd_intro_r"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_helper"><span class="id" title="lemma">replacement_repl_closure_pq_helper</span></a> <span class="id" title="var">H1</span> <span class="id" title="var">H5</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T3</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <span class="id" title="var">r</span> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <span class="id" title="var">T3</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHp</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ReplacementTyping.html#ty_rec_qp_r"><span class="id" title="constructor">ty_rec_qp_r</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H2</span> <span class="id" title="var">Hr</span>).<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_pq_r"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="PreciseFlow.html#pf_sngl_sel_unique"><span class="id" title="lemma">pf_sngl_sel_unique</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span> <span class="id" title="var">H4</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sngl_pq_r"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="PreciseFlow.html#pf_sngl_sel_unique"><span class="id" title="lemma">pf_sngl_sel_unique</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span> <span class="id" title="var">H4</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_top_r"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_dec_trm_r"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_dec_trm_r"><span class="id" title="constructor">ty_dec_trm_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_dec_typ_r"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_dec_typ_r"><span class="id" title="constructor">ty_dec_typ_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_qp_t"><span class="id" title="constructor">subtyp_sngl_qp_t</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_all_r"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_r"><span class="id" title="constructor">ty_all_r</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>); <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_qp_t"><span class="id" title="constructor">subtyp_sngl_qp_t</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_qp_t"><span class="id" title="constructor">subtyp_sngl_qp_t</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_pq"><span class="id" title="constructor">subtyp_sngl_pq</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">pq</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s II-level precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_pq2" class="idref" href="#replacement_repl_closure_pq2"><span class="id" title="lemma">replacement_repl_closure_pq2</span></a> : <span class="id" title="keyword">∀</span> <a id="G:179" class="idref" href="#G:179"><span class="id" title="binder">G</span></a> <a id="p:180" class="idref" href="#p:180"><span class="id" title="binder">p</span></a> <a id="q:181" class="idref" href="#q:181"><span class="id" title="binder">q</span></a> <a id="r:182" class="idref" href="#r:182"><span class="id" title="binder">r</span></a> <a id="T:183" class="idref" href="#T:183"><span class="id" title="binder">T</span></a> <a id="T':184" class="idref" href="#T':184"><span class="id" title="binder">T'</span></a> <a id="U:185" class="idref" href="#U:185"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:179"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:179"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:180"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:183"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:179"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q:181"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:182"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:179"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:182"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:185"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:181"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:182"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T:183"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':184"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:179"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:180"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':184"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">gen</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq"><span class="id" title="lemma">replacement_repl_closure_pq</span></a>. <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Replacement.html#repl_field_elim"><span class="id" title="lemma">repl_field_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_backtrack"><span class="id" title="lemma">pt2_backtrack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> <span class="id" title="var">Hq'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq1</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">pq</span></span> replacement
    when we know <span class="inlinecode"><span class="id" title="var">q</span></span>'s III-level precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_pq3" class="idref" href="#replacement_repl_closure_pq3"><span class="id" title="lemma">replacement_repl_closure_pq3</span></a> : <span class="id" title="keyword">∀</span> <a id="G:186" class="idref" href="#G:186"><span class="id" title="binder">G</span></a> <a id="p:187" class="idref" href="#p:187"><span class="id" title="binder">p</span></a> <a id="q:188" class="idref" href="#q:188"><span class="id" title="binder">q</span></a> <a id="r:189" class="idref" href="#r:189"><span class="id" title="binder">r</span></a> <a id="T:190" class="idref" href="#T:190"><span class="id" title="binder">T</span></a> <a id="T':191" class="idref" href="#T':191"><span class="id" title="binder">T'</span></a> <a id="U:192" class="idref" href="#U:192"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:186"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:186"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:187"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:190"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:186"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q:188"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:189"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:186"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:189"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:192"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:188"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:189"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T:190"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':191"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:186"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:187"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':191"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq2"><span class="id" title="lemma">replacement_repl_closure_pq2</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_insert"><span class="id" title="lemma">repl_insert</span></a> <span class="id" title="var">q</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">Hr1</span> <span class="id" title="var">Hr2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">S</span> <span class="id" title="var">Hq'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq2"><span class="id" title="lemma">replacement_repl_closure_pq2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq'</span> <span class="id" title="var">Hr1</span>). <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under repeated <span class="inlinecode"><span class="id" title="var">pq</span></span> replacement 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_pq_comp" class="idref" href="#replacement_repl_closure_pq_comp"><span class="id" title="lemma">replacement_repl_closure_pq_comp</span></a>: <span class="id" title="keyword">∀</span> <a id="G:193" class="idref" href="#G:193"><span class="id" title="binder">G</span></a> <a id="p:194" class="idref" href="#p:194"><span class="id" title="binder">p</span></a> <a id="q:195" class="idref" href="#q:195"><span class="id" title="binder">q</span></a> <a id="r:196" class="idref" href="#r:196"><span class="id" title="binder">r</span></a> <a id="T:197" class="idref" href="#T:197"><span class="id" title="binder">T</span></a> <a id="T':198" class="idref" href="#T':198"><span class="id" title="binder">T'</span></a> <a id="U:199" class="idref" href="#U:199"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:193"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:193"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:194"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:197"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:193"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q:195"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:196"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:193"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:196"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:199"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:195"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:196"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T:197"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':198"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:193"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:194"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':198"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hc</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hc</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHc</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq3"><span class="id" title="lemma">replacement_repl_closure_pq3</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under opening of recursive types 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="repl_rec_intro" class="idref" href="#repl_rec_intro"><span class="id" title="lemma">repl_rec_intro</span></a>: <span class="id" title="keyword">∀</span> <a id="G:200" class="idref" href="#G:200"><span class="id" title="binder">G</span></a> <a id="p:201" class="idref" href="#p:201"><span class="id" title="binder">p</span></a> <a id="T:202" class="idref" href="#T:202"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:200"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:200"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:201"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T:202"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:200"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:201"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <a class="idref" href="ReplacementTyping.html#p:201"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T:202"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#pt3_bnd"><span class="id" title="lemma">pt3_bnd</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hp</span> | [<span class="id" title="var">q</span> [<span class="id" title="var">U</span> [<span class="id" title="var">Hp1</span> [<span class="id" title="var">Hq</span> <span class="id" title="var">Hp2</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hp1</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open"><span class="id" title="lemma">repl_comp_open</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHty_path_inv</span> <span class="id" title="var">_</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hi</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq"><span class="id" title="lemma">replacement_repl_closure_pq</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_open"><span class="id" title="lemma">repl_open</span></a>. <span class="id" title="var">all</span>: <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_pq_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_open"><span class="id" title="lemma">repl_open</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span>:= <span class="id" title="var">r</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp"><span class="id" title="lemma">replacement_repl_closure_qp</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode">&lt;:-<span class="id" title="var">Sel</span></span> subtyping when
    we know that a path's II-level precise type has a type member 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="path_sel_repl2" class="idref" href="#path_sel_repl2"><span class="id" title="lemma">path_sel_repl2</span></a>: <span class="id" title="keyword">∀</span> <a id="G:203" class="idref" href="#G:203"><span class="id" title="binder">G</span></a> <a id="p:204" class="idref" href="#p:204"><span class="id" title="binder">p</span></a> <a id="A:205" class="idref" href="#A:205"><span class="id" title="binder">A</span></a> <a id="T:206" class="idref" href="#T:206"><span class="id" title="binder">T</span></a> <a id="q:207" class="idref" href="#q:207"><span class="id" title="binder">q</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:203"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:203"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#p:204"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:205"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:206"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:206"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:203"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q:207"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:206"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:203"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q:207"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p:204"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A:205"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode">&lt;:-<span class="id" title="var">Sel</span></span> subtyping when
    we know that a path's III-level precise type has a type member 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="path_sel_repl" class="idref" href="#path_sel_repl"><span class="id" title="lemma">path_sel_repl</span></a>: <span class="id" title="keyword">∀</span> <a id="G:208" class="idref" href="#G:208"><span class="id" title="binder">G</span></a> <a id="p:209" class="idref" href="#p:209"><span class="id" title="binder">p</span></a> <a id="A:210" class="idref" href="#A:210"><span class="id" title="binder">A</span></a> <a id="T:211" class="idref" href="#T:211"><span class="id" title="binder">T</span></a> <a id="q:212" class="idref" href="#q:212"><span class="id" title="binder">q</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:208"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:208"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:209"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:210"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:211"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:211"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:208"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q:212"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:211"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:208"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q:212"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p:209"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A:210"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl2"><span class="id" title="lemma">path_sel_repl2</span></a>.<br/>
&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <a id="q:214" class="idref" href="#q:214"><span class="id" title="binder">q</span></a>, <a class="idref" href="ReplacementTyping.html#q:213"><span class="id" title="variable">q</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#q:213"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="constructor">nil</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnil</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span>× <a class="idref" href="Binding.html#field_sel_nil"><span class="id" title="lemma">field_sel_nil</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">He1</span>: (<span class="id" title="var">Hnil</span> <span class="id" title="var">q0</span>). <span class="id" title="var">lets</span> <span class="id" title="var">He2</span>: (<span class="id" title="var">Hnil</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hp0</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2"><span class="id" title="lemma">replacement_repl_closure_qp2</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp0</span> <span class="id" title="var">IHHp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">He1</span> <span class="id" title="tactic">at</span> 2. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">He2</span> <span class="id" title="tactic">at</span> 2. <span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#rpath"><span class="id" title="constructor">rpath</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under <span class="inlinecode"><span class="id" title="var">Sel</span>-&lt;:</span> subtyping 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="path_sel_repl_inv" class="idref" href="#path_sel_repl_inv"><span class="id" title="lemma">path_sel_repl_inv</span></a>: <span class="id" title="keyword">∀</span> <a id="G:215" class="idref" href="#G:215"><span class="id" title="binder">G</span></a> <a id="p:216" class="idref" href="#p:216"><span class="id" title="binder">p</span></a> <a id="A:217" class="idref" href="#A:217"><span class="id" title="binder">A</span></a> <a id="T:218" class="idref" href="#T:218"><span class="id" title="binder">T</span></a> <a id="q:219" class="idref" href="#q:219"><span class="id" title="binder">q</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:215"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:215"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:216"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:217"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:218"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:218"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:215"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q:219"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p:216"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A:217"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:215"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q:219"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:218"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#path_sel_inv"><span class="id" title="lemma">path_sel_inv</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHq</span>. <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseTyping.html#pf_pt3_unique"><span class="id" title="lemma">pf_pt3_unique</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp</span>). <span class="id" title="tactic">subst</span>×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Definitions.html#record_type"><span class="id" title="definition">record_type</span></a> (<a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><span class="id" title="var">A</span> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <span class="id" title="var">T</span> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">T</span><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrt</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHq</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">p</span> := <span class="id" title="var">q</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs</span>) (<span class="id" title="var">A0</span> := <span class="id" title="var">A</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pf_pt3_trans_inv_mult'"><span class="id" title="lemma">pf_pt3_trans_inv_mult'</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="path_sel_repl_inv'" class="idref" href="#path_sel_repl_inv'"><span class="id" title="lemma">path_sel_repl_inv'</span></a>: <span class="id" title="keyword">∀</span> <a id="G:220" class="idref" href="#G:220"><span class="id" title="binder">G</span></a> <a id="p:221" class="idref" href="#p:221"><span class="id" title="binder">p</span></a> <a id="A:222" class="idref" href="#A:222"><span class="id" title="binder">A</span></a> <a id="q:223" class="idref" href="#q:223"><span class="id" title="binder">q</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:220"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:220"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q:223"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p:221"><span class="id" title="variable">p</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A:222"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="T:224" class="idref" href="#T:224"><span class="id" title="binder">T</span></a><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G:220"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:221"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:222"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:224"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:224"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:220"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q:223"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:224"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hps</span>: <a class="idref" href="InvertibleTyping.html#path_sel_inv'"><span class="id" title="lemma">path_sel_inv'</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hps</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T</span> [<span class="id" title="var">Hp</span> <span class="id" title="var">Hp0</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T</span> [<span class="id" title="var">Hqbs</span> <span class="id" title="var">Hr</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_field_trans'"><span class="id" title="lemma">pt3_field_trans'</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a path has a replacement type it has also an invertible type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="repl_to_inv" class="idref" href="#repl_to_inv"><span class="id" title="lemma">repl_to_inv</span></a> <a id="G:225" class="idref" href="#G:225"><span class="id" title="binder">G</span></a> <a id="p:226" class="idref" href="#p:226"><span class="id" title="binder">p</span></a> <a id="T:227" class="idref" href="#T:227"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:225"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:226"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:227"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="U:228" class="idref" href="#U:228"><span class="id" title="binder">U</span></a><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G:225"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="ReplacementTyping.html#p:226"><span class="id" title="variable">p</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:228"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHty_repl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hp</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#inv_backtrack"><span class="id" title="lemma">inv_backtrack</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under tight subtyping 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="replacement_subtyping_closure" class="idref" href="#replacement_subtyping_closure"><span class="id" title="lemma">replacement_subtyping_closure</span></a> : <span class="id" title="keyword">∀</span> <a id="G:229" class="idref" href="#G:229"><span class="id" title="binder">G</span></a> <a id="T:230" class="idref" href="#T:230"><span class="id" title="binder">T</span></a> <a id="U:231" class="idref" href="#U:231"><span class="id" title="binder">U</span></a> <a id="p:232" class="idref" href="#p:232"><span class="id" title="binder">p</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:229"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:229"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#T:230"><span class="id" title="variable">T</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#U:231"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:229"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:232"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:230"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:229"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:232"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:231"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hs</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hs</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span>  "subtyp_bot"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">false</span>× <a class="idref" href="InvertibleTyping.html#invertible_bot"><span class="id" title="lemma">invertible_bot</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_and1"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ReplacementTyping.html#repl_and"><span class="id" title="lemma">repl_and</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">destruct_all</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_and2"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ReplacementTyping.html#repl_and"><span class="id" title="lemma">repl_and</span></a> <span class="id" title="var">Hi</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span>. <span class="id" title="var">destruct_all</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_sngl_pq"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq3"><span class="id" title="lemma">replacement_repl_closure_pq3</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_sngl_qp"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp3"><span class="id" title="lemma">replacement_repl_closure_qp3</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_sel2"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl"><span class="id" title="lemma">path_sel_repl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "subtyp_sel1"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl_inv"><span class="id" title="lemma">path_sel_repl_inv</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a path has a replacement type it also has a III-level precise type 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="repl_prec_exists" class="idref" href="#repl_prec_exists"><span class="id" title="lemma">repl_prec_exists</span></a>: <span class="id" title="keyword">∀</span> <a id="G:233" class="idref" href="#G:233"><span class="id" title="binder">G</span></a> <a id="p:234" class="idref" href="#p:234"><span class="id" title="binder">p</span></a> <a id="T:235" class="idref" href="#T:235"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:233"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:234"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:235"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="U:236" class="idref" href="#U:236"><span class="id" title="binder">U</span></a><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G:233"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:234"><span class="id" title="variable">p</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:236"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#repl_to_inv"><span class="id" title="lemma">repl_to_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hp</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hp</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement is closed under field selection on paths 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="repl_fld" class="idref" href="#repl_fld"><span class="id" title="lemma">repl_fld</span></a> : <span class="id" title="keyword">∀</span> <a id="G:237" class="idref" href="#G:237"><span class="id" title="binder">G</span></a> <a id="p:238" class="idref" href="#p:238"><span class="id" title="binder">p</span></a> <a id="a:239" class="idref" href="#a:239"><span class="id" title="binder">a</span></a> <a id="T:240" class="idref" href="#T:240"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:237"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:237"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:238"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#a:239"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">⦂</span></a> <a class="idref" href="ReplacementTyping.html#T:240"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#18cbe8108c7275adbcbe2d488cc0d64e"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:237"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:238"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ReplacementTyping.html#a:239"><span class="id" title="variable">a</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:240"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_fld"><span class="id" title="constructor">pf_fld</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>; <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lets</span> <span class="id" title="var">Hq</span>: (<a class="idref" href="PreciseTyping.html#pt3_field_elim"><span class="id" title="lemma">pt3_field_elim</span></a> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hp</span>: (<a class="idref" href="PreciseTyping.html#pt3_trans"><span class="id" title="lemma">pt3_trans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>). <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_subtyping_closure"><span class="id" title="lemma">replacement_subtyping_closure</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">T'</span></span> are equivalent then <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢//</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T'</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_comp_typed" class="idref" href="#replacement_repl_closure_comp_typed"><span class="id" title="lemma">replacement_repl_closure_comp_typed</span></a>: <span class="id" title="keyword">∀</span> <a id="G:241" class="idref" href="#G:241"><span class="id" title="binder">G</span></a> <a id="p:242" class="idref" href="#p:242"><span class="id" title="binder">p</span></a> <a id="T:243" class="idref" href="#T:243"><span class="id" title="binder">T</span></a> <a id="T':244" class="idref" href="#T':244"><span class="id" title="binder">T'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:241"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:241"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:242"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:243"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:241"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#c7ef41c91aa73ea0925fafe08ac00851"><span class="id" title="notation">⊢</span></a> <a class="idref" href="ReplacementTyping.html#T':244"><span class="id" title="variable">T'</span></a> <a class="idref" href="PreciseTyping.html#c7ef41c91aa73ea0925fafe08ac00851"><span class="id" title="notation">⟿</span></a> <a class="idref" href="ReplacementTyping.html#T:243"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:241"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:242"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':244"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p'</span> [<span class="id" title="var">q'</span> [<span class="id" title="var">S</span> [<span class="id" title="var">Hpq</span> [<span class="id" title="var">Hq</span> <span class="id" title="var">Hr'</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hrc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp"><span class="id" title="lemma">replacement_repl_closure_qp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr'</span>). <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
From replacement typing of singleton types to invertible typing of singleton types 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="repl_to_invertible_sngl_repl_comp" class="idref" href="#repl_to_invertible_sngl_repl_comp"><span class="id" title="lemma">repl_to_invertible_sngl_repl_comp</span></a>: <span class="id" title="keyword">∀</span> <a id="G:245" class="idref" href="#G:245"><span class="id" title="binder">G</span></a> <a id="p:246" class="idref" href="#p:246"><span class="id" title="binder">p</span></a> <a id="q:247" class="idref" href="#q:247"><span class="id" title="binder">q</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:245"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:245"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:246"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:247"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="q':248" class="idref" href="#q':248"><span class="id" title="binder">q'</span></a><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G:245"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⊢</span></a> <a class="idref" href="ReplacementTyping.html#q:247"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⟿'</span></a> <a class="idref" href="ReplacementTyping.html#q':248"><span class="id" title="variable">q'</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G:245"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="ReplacementTyping.html#p:246"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q':248"><span class="id" title="variable">q'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_refl"><span class="id" title="constructor">star_refl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sngl_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p'</span> [<span class="id" title="var">Hr</span> <span class="id" title="var">Hr'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_one"><span class="id" title="lemma">star_one</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If a path <span class="inlinecode"><span class="id" title="var">p</span></span> has type <span class="inlinecode"><span class="id" title="var">q.type</span></span> under replacement typing and <span class="inlinecode"><span class="id" title="var">q</span></span> is well-typed,
    then the invertible type of <span class="inlinecode"><span class="id" title="var">p</span></span> has a singleton type <span class="inlinecode"><span class="id" title="var">q'.type</span></span>, and <span class="inlinecode"><span class="id" title="var">q</span></span> and <span class="inlinecode"><span class="id" title="var">q'</span></span>
    are aliases. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="repl_to_invertible_sngl" class="idref" href="#repl_to_invertible_sngl"><span class="id" title="lemma">repl_to_invertible_sngl</span></a>: <span class="id" title="keyword">∀</span> <a id="G:249" class="idref" href="#G:249"><span class="id" title="binder">G</span></a> <a id="p:250" class="idref" href="#p:250"><span class="id" title="binder">p</span></a> <a id="q:251" class="idref" href="#q:251"><span class="id" title="binder">q</span></a> <a id="U:252" class="idref" href="#U:252"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:249"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:249"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:250"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:251"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:249"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q:251"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:252"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="q':253" class="idref" href="#q':253"><span class="id" title="binder">q'</span></a> <a id="S:254" class="idref" href="#S:254"><span class="id" title="binder">S</span></a><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G:249"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="ReplacementTyping.html#p:250"><span class="id" title="variable">p</span></a><a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q':253"><span class="id" title="variable">q'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G:249"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q':253"><span class="id" title="variable">q'</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#S:254"><span class="id" title="variable">S</span></a> <span class="id" title="notation">∧</span> <span class="id" title="notation">(</span><a class="idref" href="ReplacementTyping.html#q:251"><span class="id" title="variable">q</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#q':253"><span class="id" title="variable">q'</span></a> <span class="id" title="notation">∨</span> <a class="idref" href="ReplacementTyping.html#G:249"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q:251"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q':253"><span class="id" title="variable">q'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>. <span class="id" title="var">gen</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#pt2_qbs_typed"><span class="id" title="lemma">pt2_qbs_typed</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">T</span> <span class="id" title="var">Hq0bs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq0bs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">q'</span> [<span class="id" title="var">S</span> [<span class="id" title="var">Hr</span> [<span class="id" title="var">Hq'</span> [<span class="id" title="var">Heq</span> | <span class="id" title="var">Hq0'</span>]]]]]. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> (<span class="id" title="var">q0</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs</span>) <span class="id" title="var">T</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_trans_trans"><span class="id" title="lemma">pt3_trans_trans</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">∃</span> <span class="id" title="var">q'</span> <span class="id" title="var">S</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt3_sngl_trans"><span class="id" title="constructor">pt3_sngl_trans</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseTyping.html#pt2_field_trans"><span class="id" title="lemma">pt2_field_trans</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_comp_typed_path" class="idref" href="#replacement_repl_closure_comp_typed_path"><span class="id" title="lemma">replacement_repl_closure_comp_typed_path</span></a>: <span class="id" title="keyword">∀</span> <a id="G:255" class="idref" href="#G:255"><span class="id" title="binder">G</span></a> <a id="p:256" class="idref" href="#p:256"><span class="id" title="binder">p</span></a> <a id="q:257" class="idref" href="#q:257"><span class="id" title="binder">q</span></a> <a id="q':258" class="idref" href="#q':258"><span class="id" title="binder">q'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:255"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:255"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:256"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:257"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:255"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⊢</span></a> <a class="idref" href="ReplacementTyping.html#q':258"><span class="id" title="variable">q'</span></a> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⟿'</span></a> <a class="idref" href="ReplacementTyping.html#q:257"><span class="id" title="variable">q</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:255"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:256"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q':258"><span class="id" title="variable">q'</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHHr</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_sngl_qp_r"><span class="id" title="constructor">ty_sngl_qp_r</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">p</span></span>'s replacement type is <span class="inlinecode"><span class="id" title="var">q.type</span></span> and <span class="inlinecode"><span class="id" title="var">q</span></span> is well-typed, then
    <span class="inlinecode"><span class="id" title="var">p.a</span></span>'s replacement type is <span class="inlinecode"><span class="id" title="var">q.a.type</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="path_elim_repl" class="idref" href="#path_elim_repl"><span class="id" title="lemma">path_elim_repl</span></a>: <span class="id" title="keyword">∀</span> <a id="G:259" class="idref" href="#G:259"><span class="id" title="binder">G</span></a> <a id="p:260" class="idref" href="#p:260"><span class="id" title="binder">p</span></a> <a id="q:261" class="idref" href="#q:261"><span class="id" title="binder">q</span></a> <a id="a:262" class="idref" href="#a:262"><span class="id" title="binder">a</span></a> <a id="T:263" class="idref" href="#T:263"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:259"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:259"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:260"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:261"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:259"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q:261"><span class="id" title="variable">q</span></a><a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ReplacementTyping.html#a:262"><span class="id" title="variable">a</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:263"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:259"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:260"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ReplacementTyping.html#a:262"><span class="id" title="variable">a</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:261"><span class="id" title="variable">q</span></a><a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a><a class="idref" href="ReplacementTyping.html#a:262"><span class="id" title="variable">a</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#repl_to_invertible_sngl_repl_comp"><span class="id" title="lemma">repl_to_invertible_sngl_repl_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">p'</span> [<span class="id" title="var">Hc</span> <span class="id" title="var">Hpi</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="InvertibleTyping.html#inv_to_precise_sngl_repl_comp"><span class="id" title="lemma">inv_to_precise_sngl_repl_comp</span></a> <span class="id" title="var">Hpi</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">r'</span> [<span class="id" title="var">Hp'</span> <span class="id" title="var">Hrc</span>]] | <span class="id" title="var">Hp'</span>].<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#repl_prec_exists"><span class="id" title="lemma">repl_prec_exists</span></a> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hq'</span>]. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#field_typing_comp1"><span class="id" title="lemma">field_typing_comp1</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hc</span> <span class="id" title="var">Hq'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">T1</span> <span class="id" title="var">Hra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#field_typing_comp2"><span class="id" title="lemma">field_typing_comp2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hrc</span> <span class="id" title="var">Hra</span>) <span class="id" title="keyword">as</span>[<span class="id" title="var">T2</span> <span class="id" title="var">Hr'a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hper</span>: (<a class="idref" href="PreciseTyping.html#path_elim_prec"><span class="id" title="lemma">path_elim_prec</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp'</span> <span class="id" title="var">Hr'a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hinv</span>: (<a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="var">Hper</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">r'</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⟿'</span></a> <span class="id" title="var">p'</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#repl_composition_fld_elim"><span class="id" title="lemma">repl_composition_fld_elim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">q</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⟿'</span></a> <span class="id" title="var">p'</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr''</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#repl_composition_fld_elim"><span class="id" title="lemma">repl_composition_fld_elim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hic</span>: (<a class="idref" href="InvertibleTyping.html#invertible_repl_closure_comp_typed"><span class="id" title="lemma">invertible_repl_closure_comp_typed</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hinv</span> <span class="id" title="var">Hr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_comp_typed_path"><span class="id" title="lemma">replacement_repl_closure_comp_typed_path</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#repl_prec_exists"><span class="id" title="lemma">repl_prec_exists</span></a> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hq'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#field_typing_comp1"><span class="id" title="lemma">field_typing_comp1</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hc</span> <span class="id" title="var">Hq'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">T1</span> <span class="id" title="var">Hra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseTyping.html#field_typing_comp2"><span class="id" title="lemma">field_typing_comp2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp'</span> <span class="id" title="var">Hra</span>) <span class="id" title="keyword">as</span>[<span class="id" title="var">T2</span> <span class="id" title="var">Hr'a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">p</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⟿'</span></a> <span class="id" title="var">p'</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#repl_composition_fld_elim"><span class="id" title="lemma">repl_composition_fld_elim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⊢</span></a> <span class="id" title="var">q</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span> <a class="idref" href="PreciseTyping.html#c7af1974ce343fd5c18b2fc018fc3f99"><span class="id" title="notation">⟿'</span></a> <span class="id" title="var">p'</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hr''</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#repl_composition_fld_elim"><span class="id" title="lemma">repl_composition_fld_elim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <span class="id" title="var">p</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <span class="id" title="var">p</span> <a class="idref" href="Definitions.html#71ca1960dd16f5a2fd2bf72245ca13b9"><span class="id" title="notation">•</span></a> <span class="id" title="var">a</span> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">H2</span>: <a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hr'a</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#ty_self_inv"><span class="id" title="constructor">ty_self_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hic</span>: (<a class="idref" href="InvertibleTyping.html#invertible_repl_closure_comp_typed"><span class="id" title="lemma">invertible_repl_closure_comp_typed</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_comp_typed_path"><span class="id" title="lemma">replacement_repl_closure_comp_typed_path</span></a>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under singleton transitivity with a type <span class="inlinecode"><span class="id" title="var">q.type</span></span>
    if <span class="inlinecode"><span class="id" title="var">q</span></span> is typeable under invertible typing 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="inv_sngl_trans" class="idref" href="#inv_sngl_trans"><span class="id" title="lemma">inv_sngl_trans</span></a>: <span class="id" title="keyword">∀</span> <a id="G:264" class="idref" href="#G:264"><span class="id" title="binder">G</span></a> <a id="p:265" class="idref" href="#p:265"><span class="id" title="binder">p</span></a> <a id="q:266" class="idref" href="#q:266"><span class="id" title="binder">q</span></a> <a id="T:267" class="idref" href="#T:267"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:264"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:264"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:265"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:266"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:264"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">⊢##</span></a> <a class="idref" href="ReplacementTyping.html#q:266"><span class="id" title="variable">q</span></a> <a class="idref" href="InvertibleTyping.html#73b11c120860bd23cb2b9718d29e8cd0"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:267"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:264"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:265"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:267"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hpq</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq"><span class="id" title="lemma">replacement_repl_closure_pq</span></a>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">H'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#repl_to_invertible_sngl"><span class="id" title="lemma">repl_to_invertible_sngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">H'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> [<span class="id" title="var">S</span> [<span class="id" title="var">Hpr</span> [<span class="id" title="var">Hq</span> <span class="id" title="var">Hrc</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="InvertibleTyping.html#inv_to_precise_sngl"><span class="id" title="lemma">inv_to_precise_sngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpr</span> (<a class="idref" href="PreciseTyping.html#pt3"><span class="id" title="constructor">pt3</span></a> <span class="id" title="var">Hq</span>)) <span class="id" title="keyword">as</span> [[<span class="id" title="var">r'</span> [<span class="id" title="var">Hpr'</span> <span class="id" title="var">Hrc'</span>]] | <span class="id" title="var">Hp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">Hpr</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc</span>, <span class="id" title="var">Hrc'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lets</span> <span class="id" title="var">Hpi</span>: (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span>). <span class="id" title="var">destruct_all</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp3"><span class="id" title="lemma">replacement_repl_closure_qp3</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_intro_sngl"><span class="id" title="lemma">repl_intro_sngl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lets</span> <span class="id" title="var">Hpi</span>: (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span>). <span class="id" title="var">destruct_all</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#pt3_sngl_trans3"><span class="id" title="lemma">pt3_sngl_trans3</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_inv"><span class="id" title="constructor">ty_precise_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq3"><span class="id" title="lemma">replacement_repl_closure_pq3</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpr'</span> <span class="id" title="var">H1</span> <span class="id" title="var">Hq</span> (<a class="idref" href="Replacement.html#repl_intro_sngl"><span class="id" title="lemma">repl_intro_sngl</span></a> <span class="id" title="var">r'</span> <span class="id" title="var">r</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp3"><span class="id" title="lemma">replacement_repl_closure_qp3</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_intro_sngl"><span class="id" title="lemma">repl_intro_sngl</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrc</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lets</span> <span class="id" title="var">Hpi</span>: (<a class="idref" href="PreciseTyping.html#pt3_invert"><span class="id" title="lemma">pt3_invert</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span>). <span class="id" title="var">destruct_all</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp3"><span class="id" title="lemma">replacement_repl_closure_qp3</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#ty_self_inv"><span class="id" title="constructor">ty_self_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_intro_sngl"><span class="id" title="lemma">repl_intro_sngl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Replacement typing is closed under singleton transitivity 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="repl_sngl_trans" class="idref" href="#repl_sngl_trans"><span class="id" title="lemma">repl_sngl_trans</span></a>: <span class="id" title="keyword">∀</span> <a id="G:268" class="idref" href="#G:268"><span class="id" title="binder">G</span></a> <a id="p:269" class="idref" href="#p:269"><span class="id" title="binder">p</span></a> <a id="q:270" class="idref" href="#q:270"><span class="id" title="binder">q</span></a> <a id="T:271" class="idref" href="#T:271"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:268"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:268"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:269"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:270"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:268"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#q:270"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:271"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:268"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:269"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:271"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span>. <span class="id" title="var">gen</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hpq</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#inv_sngl_trans"><span class="id" title="lemma">inv_sngl_trans</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">Hpq</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_bnd_r"><span class="id" title="constructor">ty_bnd_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="ReplacementTyping.html#repl_to_inv"><span class="id" title="lemma">repl_to_inv</span></a> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">_</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hq'</span>]%<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a>]%<a class="idref" href="InvertibleTyping.html#inv_to_prec"><span class="id" title="lemma">inv_to_prec</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#repl_to_invertible_sngl"><span class="id" title="lemma">repl_to_invertible_sngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> [<span class="id" title="var">S</span> [<span class="id" title="var">Hpr</span> [<span class="id" title="var">Hs</span> <span class="id" title="var">Hor</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="InvertibleTyping.html#inv_to_precise_sngl"><span class="id" title="lemma">inv_to_precise_sngl</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpr</span> (<a class="idref" href="PreciseTyping.html#pt3"><span class="id" title="constructor">pt3</span></a> <span class="id" title="var">Hs</span>)) <span class="id" title="keyword">as</span> [[<span class="id" title="var">r'</span> [<span class="id" title="var">Hpr'</span> <span class="id" title="var">Hor'</span>]] | <span class="id" title="var">Heq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hpr</span> <span class="id" title="var">Hpq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hor</span>, <span class="id" title="var">Hor'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <span class="id" title="var">r</span> <span class="id" title="var">p0</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r</span> <span class="id" title="var">T</span>) (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">p0</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrr</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <span class="id" title="var">r</span> <span class="id" title="var">r'</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r</span> <span class="id" title="var">T</span>) (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r'</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrr</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">IHHq</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hrr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hc</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">Hpr'</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <span class="id" title="var">p</span> <span class="id" title="var">r</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">p</span> <span class="id" title="var">T</span>) (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrr</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_comp"><span class="id" title="lemma">replacement_repl_closure_pq_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">IHHq</span> <span class="id" title="var">H</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hrr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <span class="id" title="var">p</span> <span class="id" title="var">r</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">p</span> <span class="id" title="var">T</span>) (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrr</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_comp"><span class="id" title="lemma">replacement_repl_closure_pq_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">IHHq</span> <span class="id" title="var">H</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hrr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <span class="id" title="var">r</span> <span class="id" title="var">r'</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r</span> <span class="id" title="var">T</span>) (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r'</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrr'</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc'</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hc</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hrr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_comp"><span class="id" title="lemma">replacement_repl_closure_qp_comp</span></a> <span class="id" title="var">Hi</span>). <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hc'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hpr'</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hor</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<a class="idref" href="Replacement.html#repl_repeat_typ"><span class="id" title="abbreviation">repl_repeat_typ</span></a> <span class="id" title="var">p</span> <span class="id" title="var">r</span> (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">p</span> <span class="id" title="var">T</span>) (<a class="idref" href="Definitions.html#open_typ_p"><span class="id" title="definition">open_typ_p</span></a> <span class="id" title="var">r</span> <span class="id" title="var">T</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrr</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <a class="idref" href="Replacement.html#repl_comp_open_rec"><span class="id" title="lemma">repl_comp_open_rec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_comp"><span class="id" title="lemma">replacement_repl_closure_pq_comp</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">IHHq</span> <span class="id" title="var">H</span> <span class="id" title="var">Hs</span> <span class="id" title="var">Hrr</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">Hc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="ReplacementTyping.html#path_elim_repl"><span class="id" title="lemma">path_elim_repl</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hp0a</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHq</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">Hp0a</span>). <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Tight typing implies replacement typing 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="replacement_closure" class="idref" href="#replacement_closure"><span class="id" title="lemma">replacement_closure</span></a> : <span class="id" title="keyword">∀</span> <a id="G:272" class="idref" href="#G:272"><span class="id" title="binder">G</span></a> <a id="p:273" class="idref" href="#p:273"><span class="id" title="binder">p</span></a> <a id="T:274" class="idref" href="#T:274"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:272"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:272"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#1354e9ec79a363a81abeb2b2d3bd96e7"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="Definitions.html#trm_path"><span class="id" title="constructor">trm_path</span></a> <a class="idref" href="ReplacementTyping.html#p:273"><span class="id" title="variable">p</span></a> <a class="idref" href="TightTyping.html#1354e9ec79a363a81abeb2b2d3bd96e7"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:274"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:272"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">⊢//</span></a> <a class="idref" href="ReplacementTyping.html#p:273"><span class="id" title="variable">p</span></a><a class="idref" href="ReplacementTyping.html#f994db89abe75a68d8217ed0d83f3051"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:274"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_var_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_new_elim_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#repl_fld"><span class="id" title="lemma">repl_fld</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sngl_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#repl_sngl_trans"><span class="id" title="lemma">repl_sngl_trans</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_self_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hinv</span>: (<a class="idref" href="ReplacementTyping.html#repl_to_inv"><span class="id" title="lemma">repl_to_inv</span></a> <span class="id" title="var">IHHp</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hinv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">U</span> <span class="id" title="var">Hinv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hp3</span>: (<a class="idref" href="InvertibleTyping.html#inv_to_prec"><span class="id" title="lemma">inv_to_prec</span></a> <span class="id" title="var">Hinv</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp3</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> <span class="id" title="var">Hp3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hp2</span>: (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hp3</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hp2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">U''</span> <span class="id" title="var">Hp2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_r"><span class="id" title="constructor">ty_inv_r</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#ty_self_inv"><span class="id" title="constructor">ty_self_inv</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_path_elim_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_elim_repl"><span class="id" title="lemma">path_elim_repl</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_elim_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#repl_rec_intro"><span class="id" title="lemma">repl_rec_intro</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sub_t"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_subtyping_closure"><span class="id" title="lemma">replacement_subtyping_closure</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab66"></a><h2 class="section">Replacement typing for values</h2>


<div class="paragraph"> </div>

    The definition of replacement typing for values
    is similar to replacement typing for paths, but simpler. The same holds for
    its lemmas. To see the documentation for a replacement-typing-for-values lemma,
    please refer to its replacement-typing-for-paths version. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;G '⊢//v' v ':' T" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="var">v</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 59).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="ty_replv" class="idref" href="#ty_replv"><span class="id" title="inductive">ty_replv</span></a> : <a class="idref" href="Definitions.html#ctx"><span class="id" title="definition">ctx</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#val"><span class="id" title="inductive">val</span></a> <span class="id" title="notation">→</span> <a class="idref" href="Definitions.html#typ"><span class="id" title="inductive">typ</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="ty_inv_rv" class="idref" href="#ty_inv_rv"><span class="id" title="constructor">ty_inv_rv</span></a> : <span class="id" title="keyword">∀</span> <a id="G:277" class="idref" href="#G:277"><span class="id" title="binder">G</span></a> <a id="v:278" class="idref" href="#v:278"><span class="id" title="binder">v</span></a> <a id="T:279" class="idref" href="#T:279"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:277"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:278"><span class="id" title="variable">v</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:279"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:277"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:278"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:279"><span class="id" title="variable">T</span></a><br/>
| <a id="ty_and_rv" class="idref" href="#ty_and_rv"><span class="id" title="constructor">ty_and_rv</span></a> : <span class="id" title="keyword">∀</span> <a id="G:280" class="idref" href="#G:280"><span class="id" title="binder">G</span></a> <a id="v:281" class="idref" href="#v:281"><span class="id" title="binder">v</span></a> <a id="T:282" class="idref" href="#T:282"><span class="id" title="binder">T</span></a> <a id="U:283" class="idref" href="#U:283"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:280"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:281"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:282"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:280"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:281"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:283"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:280"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:281"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:282"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ReplacementTyping.html#U:283"><span class="id" title="variable">U</span></a><br/>
| <a id="ty_sel_rv" class="idref" href="#ty_sel_rv"><span class="id" title="constructor">ty_sel_rv</span></a> : <span class="id" title="keyword">∀</span> <a id="G:284" class="idref" href="#G:284"><span class="id" title="binder">G</span></a> <a id="v:285" class="idref" href="#v:285"><span class="id" title="binder">v</span></a> <a id="T:286" class="idref" href="#T:286"><span class="id" title="binder">T</span></a> <a id="q:287" class="idref" href="#q:287"><span class="id" title="binder">q</span></a> <a id="S:288" class="idref" href="#S:288"><span class="id" title="binder">S</span></a> <a id="A:289" class="idref" href="#A:289"><span class="id" title="binder">A</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:284"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:285"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:286"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:284"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:287"><span class="id" title="variable">q</span></a><a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#S:288"><span class="id" title="variable">S</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:289"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:286"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:286"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:284"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:285"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#q:287"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A:289"><span class="id" title="variable">A</span></a><br/>
| <a id="ty_rec_qp_rv" class="idref" href="#ty_rec_qp_rv"><span class="id" title="constructor">ty_rec_qp_rv</span></a> : <span class="id" title="keyword">∀</span> <a id="G:290" class="idref" href="#G:290"><span class="id" title="binder">G</span></a> <a id="p:291" class="idref" href="#p:291"><span class="id" title="binder">p</span></a> <a id="q:292" class="idref" href="#q:292"><span class="id" title="binder">q</span></a> <a id="v:293" class="idref" href="#v:293"><span class="id" title="binder">v</span></a> <a id="T:294" class="idref" href="#T:294"><span class="id" title="binder">T</span></a> <a id="T':295" class="idref" href="#T':295"><span class="id" title="binder">T'</span></a> <a id="U:296" class="idref" href="#U:296"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:290"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p:291"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:292"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:292"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:290"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q:292"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:296"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:290"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:293"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T:294"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:292"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p:291"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T:294"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':295"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:290"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:293"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T':295"><span class="id" title="variable">T'</span></a><br/>
| <a id="ty_sel_qp_rv" class="idref" href="#ty_sel_qp_rv"><span class="id" title="constructor">ty_sel_qp_rv</span></a> : <span class="id" title="keyword">∀</span> <a id="G:297" class="idref" href="#G:297"><span class="id" title="binder">G</span></a> <a id="p:298" class="idref" href="#p:298"><span class="id" title="binder">p</span></a> <a id="q:299" class="idref" href="#q:299"><span class="id" title="binder">q</span></a> <a id="v:300" class="idref" href="#v:300"><span class="id" title="binder">v</span></a> <a id="r':301" class="idref" href="#r':301"><span class="id" title="binder">r'</span></a> <a id="r'':302" class="idref" href="#r'':302"><span class="id" title="binder">r''</span></a> <a id="A:303" class="idref" href="#A:303"><span class="id" title="binder">A</span></a> <a id="U:304" class="idref" href="#U:304"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:297"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p:298"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:299"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:299"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:297"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q:299"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:304"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:297"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:300"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#r':301"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A:303"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:299"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p:298"><span class="id" title="variable">p</span></a> (<a class="idref" href="ReplacementTyping.html#r':301"><span class="id" title="variable">r'</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A:303"><span class="id" title="variable">A</span></a>) (<a class="idref" href="ReplacementTyping.html#r'':302"><span class="id" title="variable">r''</span></a> <a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a> <a class="idref" href="ReplacementTyping.html#A:303"><span class="id" title="variable">A</span></a>) <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:297"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:300"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#r'':302"><span class="id" title="variable">r''</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A:303"><span class="id" title="variable">A</span></a><br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>   <br>
    <span class="inlinecode">―――――――――――――</span> <br>
    <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">⊢##</span> <span class="inlinecode"><span class="id" title="var">p</span>:</span> <span class="inlinecode"><span class="id" title="var">top</span></span>     
</div>
<div class="code">
| <a id="ty_top_rv" class="idref" href="#ty_top_rv"><span class="id" title="constructor">ty_top_rv</span></a> : <span class="id" title="keyword">∀</span> <a id="G:305" class="idref" href="#G:305"><span class="id" title="binder">G</span></a> <a id="v:306" class="idref" href="#v:306"><span class="id" title="binder">v</span></a> <a id="T:307" class="idref" href="#T:307"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:305"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:306"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:307"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:305"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:306"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#276a4a3018138118cad52558d0b71a10"><span class="id" title="notation">⊤</span></a><br/>
<br/>
| <a id="ty_all_rv" class="idref" href="#ty_all_rv"><span class="id" title="constructor">ty_all_rv</span></a> : <span class="id" title="keyword">∀</span> <a id="G:308" class="idref" href="#G:308"><span class="id" title="binder">G</span></a> <a id="T1:309" class="idref" href="#T1:309"><span class="id" title="binder">T1</span></a> <a id="T2:310" class="idref" href="#T2:310"><span class="id" title="binder">T2</span></a> <a id="S1:311" class="idref" href="#S1:311"><span class="id" title="binder">S1</span></a> <a id="S2:312" class="idref" href="#S2:312"><span class="id" title="binder">S2</span></a> <a id="L:313" class="idref" href="#L:313"><span class="id" title="binder">L</span></a> <a id="v:314" class="idref" href="#v:314"><span class="id" title="binder">v</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:308"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:314"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="ReplacementTyping.html#S1:311"><span class="id" title="variable">S1</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="ReplacementTyping.html#T1:309"><span class="id" title="variable">T1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:308"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#S2:312"><span class="id" title="variable">S2</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#S1:311"><span class="id" title="variable">S1</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="y:315" class="idref" href="#y:315"><span class="id" title="binder">y</span></a>, <a class="idref" href="ReplacementTyping.html#y:315"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="ReplacementTyping.html#L:313"><span class="id" title="variable">L</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:308"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="ReplacementTyping.html#y:315"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="ReplacementTyping.html#S2:312"><span class="id" title="variable">S2</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="ReplacementTyping.html#y:315"><span class="id" title="variable">y</span></a> <a class="idref" href="ReplacementTyping.html#T1:309"><span class="id" title="variable">T1</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="ReplacementTyping.html#y:315"><span class="id" title="variable">y</span></a> <a class="idref" href="ReplacementTyping.html#T2:310"><span class="id" title="variable">T2</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:308"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:314"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="ReplacementTyping.html#S2:312"><span class="id" title="variable">S2</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="ReplacementTyping.html#T2:310"><span class="id" title="variable">T2</span></a><br/>
<br/>
<span class="id" title="keyword">where</span> <a id="b2f9185fb1a19cec11e77412583b017b" class="idref" href="#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">&quot;</span></a>G '⊢//v' v ':' T" := (<a class="idref" href="ReplacementTyping.html#ty_replv:276"><span class="id" title="inductive">ty_replv</span></a> <span class="id" title="var">G</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="ReplacementTyping.html#ty_replv"><span class="id" title="inductive">ty_replv</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="invertible_andv" class="idref" href="#invertible_andv"><span class="id" title="lemma">invertible_andv</span></a>: <span class="id" title="keyword">∀</span> <a id="G:316" class="idref" href="#G:316"><span class="id" title="binder">G</span></a> <a id="v:317" class="idref" href="#v:317"><span class="id" title="binder">v</span></a> <a id="T:318" class="idref" href="#T:318"><span class="id" title="binder">T</span></a> <a id="U:319" class="idref" href="#U:319"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:316"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:316"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:317"><span class="id" title="variable">v</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:318"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ReplacementTyping.html#U:319"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:316"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:317"><span class="id" title="variable">v</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:318"><span class="id" title="variable">T</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G:316"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:317"><span class="id" title="variable">v</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:319"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="repl_andv" class="idref" href="#repl_andv"><span class="id" title="lemma">repl_andv</span></a>: <span class="id" title="keyword">∀</span> <a id="G:320" class="idref" href="#G:320"><span class="id" title="binder">G</span></a> <a id="v:321" class="idref" href="#v:321"><span class="id" title="binder">v</span></a> <a id="T:322" class="idref" href="#T:322"><span class="id" title="binder">T</span></a> <a id="U:323" class="idref" href="#U:323"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:320"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:320"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:321"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:322"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#7a630e21245026e1b75685a10a5ca45a"><span class="id" title="notation">∧</span></a> <a class="idref" href="ReplacementTyping.html#U:323"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:320"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:321"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:322"><span class="id" title="variable">T</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G:320"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:321"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:323"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#invertible_andv"><span class="id" title="lemma">invertible_andv</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">split</span>×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_qp_v" class="idref" href="#replacement_repl_closure_qp_v"><span class="id" title="lemma">replacement_repl_closure_qp_v</span></a> <a id="G:324" class="idref" href="#G:324"><span class="id" title="binder">G</span></a> <a id="v:325" class="idref" href="#v:325"><span class="id" title="binder">v</span></a> <a id="p:326" class="idref" href="#p:326"><span class="id" title="binder">p</span></a> <a id="q:327" class="idref" href="#q:327"><span class="id" title="binder">q</span></a> <a id="T:328" class="idref" href="#T:328"><span class="id" title="binder">T</span></a> <a id="T':329" class="idref" href="#T':329"><span class="id" title="binder">T'</span></a> <a id="U:330" class="idref" href="#U:330"><span class="id" title="binder">U</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:324"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:324"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#p:326"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:327"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#q:327"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:324"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q:327"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:330"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:324"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:325"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:328"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:327"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#p:326"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T:328"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':329"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:324"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:325"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':329"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hpq</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hpq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hpq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">destruct</span> (<a class="idref" href="PreciseFlow.html#pfv_inert"><span class="id" title="lemma">pfv_inert</span></a> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_rv"><span class="id" title="constructor">ty_all_rv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="notation">\{}</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_rv"><span class="id" title="constructor">ty_inv_rv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_invv"><span class="id" title="constructor">ty_precise_invv</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_rv"><span class="id" title="constructor">ty_all_rv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span> := <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_inv_rv"><span class="id" title="constructor">ty_inv_rv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="InvertibleTyping.html#ty_precise_invv"><span class="id" title="constructor">ty_precise_invv</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_qp"><span class="id" title="constructor">subtyp_sngl_qp</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hpq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_and_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_qp_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_qp_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> ?: (<a class="idref" href="ReplacementTyping.html#ty_sel_qp_rv"><span class="id" title="constructor">ty_sel_qp_rv</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">Hv</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_top_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_all_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_rv"><span class="id" title="constructor">ty_all_rv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>); <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_pq_t"><span class="id" title="constructor">subtyp_sngl_pq_t</span></a>; <span class="id" title="tactic">eauto</span> 4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">eauto</span> 2. <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_pq_t"><span class="id" title="constructor">subtyp_sngl_pq_t</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_rv"><span class="id" title="constructor">ty_all_rv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>); <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_qp"><span class="id" title="constructor">subtyp_sngl_qp</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hpq</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H6</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_qp2_v" class="idref" href="#replacement_repl_closure_qp2_v"><span class="id" title="lemma">replacement_repl_closure_qp2_v</span></a> : <span class="id" title="keyword">∀</span> <a id="G:331" class="idref" href="#G:331"><span class="id" title="binder">G</span></a> <a id="p:332" class="idref" href="#p:332"><span class="id" title="binder">p</span></a> <a id="v:333" class="idref" href="#v:333"><span class="id" title="binder">v</span></a> <a id="r:334" class="idref" href="#r:334"><span class="id" title="binder">r</span></a> <a id="T:335" class="idref" href="#T:335"><span class="id" title="binder">T</span></a> <a id="T':336" class="idref" href="#T':336"><span class="id" title="binder">T'</span></a> <a id="U:337" class="idref" href="#U:337"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:331"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:331"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#p:332"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:334"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:331"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:334"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:337"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:331"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:333"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:335"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#r:334"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#p:332"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T:335"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':336"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:331"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:333"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':336"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hrp</span>. <span class="id" title="var">gen</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp_v"><span class="id" title="lemma">replacement_repl_closure_qp_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Hr'</span>: (<a class="idref" href="Replacement.html#repl_field_elim"><span class="id" title="lemma">repl_field_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hrp</span>). <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_backtrack"><span class="id" title="lemma">pt2_backtrack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hq'</span>]. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_qp3_v" class="idref" href="#replacement_repl_closure_qp3_v"><span class="id" title="lemma">replacement_repl_closure_qp3_v</span></a> : <span class="id" title="keyword">∀</span> <a id="G:338" class="idref" href="#G:338"><span class="id" title="binder">G</span></a> <a id="v:339" class="idref" href="#v:339"><span class="id" title="binder">v</span></a> <a id="p:340" class="idref" href="#p:340"><span class="id" title="binder">p</span></a> <a id="r:341" class="idref" href="#r:341"><span class="id" title="binder">r</span></a> <a id="T:342" class="idref" href="#T:342"><span class="id" title="binder">T</span></a> <a id="T':343" class="idref" href="#T':343"><span class="id" title="binder">T'</span></a> <a id="U:344" class="idref" href="#U:344"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:338"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:338"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:340"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:341"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:338"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:341"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:344"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:338"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:339"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:342"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#r:341"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#p:340"><span class="id" title="variable">p</span></a> <a class="idref" href="ReplacementTyping.html#T:342"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':343"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:338"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:339"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':343"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hrp</span>. <span class="id" title="var">gen</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hrp</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2_v"><span class="id" title="lemma">replacement_repl_closure_qp2_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_insert"><span class="id" title="lemma">repl_insert</span></a> <span class="id" title="var">q</span> <span class="id" title="var">Hrp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">Hr1</span> <span class="id" title="var">Hr2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">W</span> <span class="id" title="var">Hp'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hv</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr1</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2_v"><span class="id" title="lemma">replacement_repl_closure_qp2_v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHp</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="invertible_repl_closure_v_helper" class="idref" href="#invertible_repl_closure_v_helper"><span class="id" title="lemma">invertible_repl_closure_v_helper</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="D:345" class="idref" href="#D:345"><span class="id" title="binder">D</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_dec"><span class="id" title="inductive">record_dec</span></a> <a class="idref" href="ReplacementTyping.html#D:345"><span class="id" title="variable">D</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <a id="G:346" class="idref" href="#G:346"><span class="id" title="binder">G</span></a> <a id="v:347" class="idref" href="#v:347"><span class="id" title="binder">v</span></a> <a id="q:348" class="idref" href="#q:348"><span class="id" title="binder">q</span></a> <a id="r:349" class="idref" href="#r:349"><span class="id" title="binder">r</span></a> <a id="D':350" class="idref" href="#D':350"><span class="id" title="binder">D'</span></a> <a id="T:351" class="idref" href="#T:351"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:346"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:346"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:347"><span class="id" title="variable">v</span></a><a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="ReplacementTyping.html#D:345"><span class="id" title="variable">D</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:346"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:348"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:349"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:349"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:346"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:349"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:351"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_dec"><span class="id" title="inductive">repl_dec</span></a> <a class="idref" href="ReplacementTyping.html#q:348"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:349"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#D:345"><span class="id" title="variable">D</span></a> <a class="idref" href="ReplacementTyping.html#D':350"><span class="id" title="variable">D'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:346"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:347"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="ReplacementTyping.html#D':350"><span class="id" title="variable">D'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="U:352" class="idref" href="#U:352"><span class="id" title="binder">U</span></a> <a id="ls:353" class="idref" href="#ls:353"><span class="id" title="binder">ls</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#record_typ"><span class="id" title="inductive">record_typ</span></a> <a class="idref" href="ReplacementTyping.html#U:352"><span class="id" title="variable">U</span></a> <a class="idref" href="ReplacementTyping.html#ls:353"><span class="id" title="variable">ls</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <a id="G:354" class="idref" href="#G:354"><span class="id" title="binder">G</span></a> <a id="v:355" class="idref" href="#v:355"><span class="id" title="binder">v</span></a> <a id="q:356" class="idref" href="#q:356"><span class="id" title="binder">q</span></a> <a id="r:357" class="idref" href="#r:357"><span class="id" title="binder">r</span></a> <a id="U':358" class="idref" href="#U':358"><span class="id" title="binder">U'</span></a> <a id="T:359" class="idref" href="#T:359"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:354"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:354"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:355"><span class="id" title="variable">v</span></a><a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:352"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:354"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:356"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:357"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:357"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:354"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:357"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:359"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:356"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:357"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#U:352"><span class="id" title="variable">U</span></a> <a class="idref" href="ReplacementTyping.html#U':358"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:354"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:355"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U':358"><span class="id" title="variable">U'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="U:360" class="idref" href="#U:360"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert_typ"><span class="id" title="inductive">inert_typ</span></a> <a class="idref" href="ReplacementTyping.html#U:360"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span> <span class="id" title="keyword">∀</span> <a id="G:361" class="idref" href="#G:361"><span class="id" title="binder">G</span></a> <a id="v:362" class="idref" href="#v:362"><span class="id" title="binder">v</span></a> <a id="q:363" class="idref" href="#q:363"><span class="id" title="binder">q</span></a> <a id="r:364" class="idref" href="#r:364"><span class="id" title="binder">r</span></a> <a id="U':365" class="idref" href="#U':365"><span class="id" title="binder">U'</span></a> <a id="T:366" class="idref" href="#T:366"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:361"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:361"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:362"><span class="id" title="variable">v</span></a><a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:360"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:361"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:363"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:364"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:364"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:361"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:364"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:366"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:363"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:364"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#U:360"><span class="id" title="variable">U</span></a> <a class="idref" href="ReplacementTyping.html#U':365"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:361"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:362"><span class="id" title="variable">v</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U':365"><span class="id" title="variable">U'</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#rcd_mutind"><span class="id" title="definition">rcd_mutind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inversions</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Ht</span>: (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a> <span class="id" title="var">H1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_rv"><span class="id" title="constructor">ty_all_rv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H9</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="var">lets</span> <span class="id" title="var">Ho</span>: (<a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="var">y</span> <span class="id" title="var">H9</span> <span class="id" title="var">Ht</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Weakening.html#weaken_subtyp"><span class="id" title="lemma">weaken_subtyp</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Binding.html#typed_paths_named"><span class="id" title="lemma">typed_paths_named</span></a> (<a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a> <span class="id" title="var">H2</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Ho</span> <span class="id" title="var">Hs</span>). <span class="id" title="var">solve_repl_sub</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="invertible_repl_closure_v" class="idref" href="#invertible_repl_closure_v"><span class="id" title="lemma">invertible_repl_closure_v</span></a> : <span class="id" title="keyword">∀</span> <a id="G:367" class="idref" href="#G:367"><span class="id" title="binder">G</span></a> <a id="v:368" class="idref" href="#v:368"><span class="id" title="binder">v</span></a> <a id="q:369" class="idref" href="#q:369"><span class="id" title="binder">q</span></a> <a id="r:370" class="idref" href="#r:370"><span class="id" title="binder">r</span></a> <a id="T:371" class="idref" href="#T:371"><span class="id" title="binder">T</span></a> <a id="T':372" class="idref" href="#T':372"><span class="id" title="binder">T'</span></a> <a id="U:373" class="idref" href="#U:373"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:367"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:367"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:368"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:371"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:367"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:369"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:370"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:370"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:367"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:370"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:373"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:369"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:370"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T:371"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':372"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:367"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:368"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':372"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hqr</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hrep</span>. <span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hrep</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_precise_invv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Ht</span>: (<a class="idref" href="PreciseFlow.html#pfv_inert"><span class="id" title="lemma">pfv_inert</span></a> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#invertible_repl_closure_v_helper"><span class="id" title="lemma">invertible_repl_closure_v_helper</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_pq_invv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_pq_v" class="idref" href="#replacement_repl_closure_pq_v"><span class="id" title="lemma">replacement_repl_closure_pq_v</span></a> : <span class="id" title="keyword">∀</span> <a id="G:374" class="idref" href="#G:374"><span class="id" title="binder">G</span></a> <a id="v:375" class="idref" href="#v:375"><span class="id" title="binder">v</span></a> <a id="q:376" class="idref" href="#q:376"><span class="id" title="binder">q</span></a> <a id="r:377" class="idref" href="#r:377"><span class="id" title="binder">r</span></a> <a id="T:378" class="idref" href="#T:378"><span class="id" title="binder">T</span></a> <a id="T':379" class="idref" href="#T':379"><span class="id" title="binder">T'</span></a> <a id="U:380" class="idref" href="#U:380"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:374"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:374"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:375"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:378"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:374"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⊢!</span></a> <a class="idref" href="ReplacementTyping.html#q:376"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:377"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <a class="idref" href="PreciseFlow.html#27d10efae8295170a08832205c915493"><span class="id" title="notation">⪼</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:377"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:374"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:377"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:380"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:376"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:377"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T:378"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':379"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:374"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:375"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':379"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hqr</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">gen</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">T'</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#invertible_repl_closure_v"><span class="id" title="lemma">invertible_repl_closure_v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_and_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHv</span>. <span class="id" title="var">invert_repl</span>. <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_flds_elim"><span class="id" title="lemma">pf_sngl_flds_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hq</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Binding.html#field_sel_nil"><span class="id" title="lemma">field_sel_nil</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_T_unique"><span class="id" title="lemma">pf_T_unique</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_U"><span class="id" title="lemma">pf_sngl_U</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_rec_qp_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_helper"><span class="id" title="lemma">replacement_repl_closure_pq_helper</span></a> <span class="id" title="var">H1</span> <span class="id" title="var">H5</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T3</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">Hr</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">G</span> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <span class="id" title="var">v</span> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <span class="id" title="var">T3</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHv</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="ReplacementTyping.html#ty_rec_qp_rv"><span class="id" title="constructor">ty_rec_qp_rv</span></a> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H2</span> <span class="id" title="var">Hr</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_pq_rv"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">q</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs0</span> <span class="id" title="notation">=</span> <span class="id" title="var">r</span> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="var">bs</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#pf_sngl_sel_unique"><span class="id" title="lemma">pf_sngl_sel_unique</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H1</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_top_rv"%<span class="id" title="var">string</span>. <span class="id" title="var">invert_repl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_all_rv"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invert_repl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="ReplacementTyping.html#ty_all_rv"><span class="id" title="constructor">ty_all_rv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">L</span>:=<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>); <span class="id" title="tactic">eauto</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_trans_t"><span class="id" title="constructor">subtyp_trans_t</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_qp_t"><span class="id" title="constructor">subtyp_sngl_qp_t</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="TightTyping.html#subtyp_sngl_qp_t"><span class="id" title="constructor">subtyp_sngl_qp_t</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">introv</span> <span class="id" title="var">Hy</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="Replacement.html#repl_open_var"><span class="id" title="lemma">repl_open_var</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_names</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Definitions.html#subtyp_sngl_pq"><span class="id" title="constructor">subtyp_sngl_pq</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="PreciseFlow.html#precise_to_general"><span class="id" title="lemma">precise_to_general</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="Weakening.html#weaken_ty_trm"><span class="id" title="lemma">weaken_ty_trm</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="PreciseTyping.html#precise_to_general2"><span class="id" title="lemma">precise_to_general2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Replacement.html#repl_swap"><span class="id" title="lemma">repl_swap</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_pq2_v" class="idref" href="#replacement_repl_closure_pq2_v"><span class="id" title="lemma">replacement_repl_closure_pq2_v</span></a> : <span class="id" title="keyword">∀</span> <a id="G:381" class="idref" href="#G:381"><span class="id" title="binder">G</span></a> <a id="v:382" class="idref" href="#v:382"><span class="id" title="binder">v</span></a> <a id="q:383" class="idref" href="#q:383"><span class="id" title="binder">q</span></a> <a id="r:384" class="idref" href="#r:384"><span class="id" title="binder">r</span></a> <a id="T:385" class="idref" href="#T:385"><span class="id" title="binder">T</span></a> <a id="T':386" class="idref" href="#T':386"><span class="id" title="binder">T'</span></a> <a id="U:387" class="idref" href="#U:387"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:381"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:381"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:382"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:385"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:381"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#q:383"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:384"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:381"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:384"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:387"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:383"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:384"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T:385"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':386"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:381"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:382"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':386"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr'</span> <span class="id" title="var">Hr</span>. <span class="id" title="var">gen</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq_v"><span class="id" title="lemma">replacement_repl_closure_pq_v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseFlow.html#pf_sngl_T"><span class="id" title="lemma">pf_sngl_T</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Hr''</span>: (<a class="idref" href="Replacement.html#repl_field_elim"><span class="id" title="lemma">repl_field_elim</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr</span>). <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_backtrack"><span class="id" title="lemma">pt2_backtrack</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hr'</span>) <span class="id" title="keyword">as</span> [? ?]. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="replacement_repl_closure_pq3_v" class="idref" href="#replacement_repl_closure_pq3_v"><span class="id" title="lemma">replacement_repl_closure_pq3_v</span></a> : <span class="id" title="keyword">∀</span> <a id="G:388" class="idref" href="#G:388"><span class="id" title="binder">G</span></a> <a id="v:389" class="idref" href="#v:389"><span class="id" title="binder">v</span></a> <a id="q:390" class="idref" href="#q:390"><span class="id" title="binder">q</span></a> <a id="r:391" class="idref" href="#r:391"><span class="id" title="binder">r</span></a> <a id="T:392" class="idref" href="#T:392"><span class="id" title="binder">T</span></a> <a id="T':393" class="idref" href="#T':393"><span class="id" title="binder">T'</span></a> <a id="U:394" class="idref" href="#U:394"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:388"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:388"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:389"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:392"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:388"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#q:390"><span class="id" title="variable">q</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">{{</span></a> <a class="idref" href="ReplacementTyping.html#r:391"><span class="id" title="variable">r</span></a> <a class="idref" href="Definitions.html#2e12ae37c5a5c7396a13d7170e0de451"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:388"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#r:391"><span class="id" title="variable">r</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:394"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#repl_typ"><span class="id" title="inductive">repl_typ</span></a> <a class="idref" href="ReplacementTyping.html#q:390"><span class="id" title="variable">q</span></a> <a class="idref" href="ReplacementTyping.html#r:391"><span class="id" title="variable">r</span></a> <a class="idref" href="ReplacementTyping.html#T:392"><span class="id" title="variable">T</span></a> <a class="idref" href="ReplacementTyping.html#T':393"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:388"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:389"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T':393"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hq</span> <span class="id" title="var">Hr</span> <span class="id" title="var">Hr'</span>. <span class="id" title="var">gen</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hq</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hv</span> <span class="id" title="var">Hr</span>; <span class="id" title="var">introv</span> <span class="id" title="var">Hr'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq2_v"><span class="id" title="lemma">replacement_repl_closure_pq2_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_insert"><span class="id" title="lemma">repl_insert</span></a> <span class="id" title="var">q</span> <span class="id" title="var">Hr</span>) <span class="id" title="keyword">as</span> [? [<span class="id" title="var">Hr1</span> <span class="id" title="var">Hr2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hq</span>) <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hq'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hc</span>: (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq2_v"><span class="id" title="lemma">replacement_repl_closure_pq2_v</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq'</span> <span class="id" title="var">Hr1</span>). <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="path_sel_repl2_v" class="idref" href="#path_sel_repl2_v"><span class="id" title="lemma">path_sel_repl2_v</span></a>: <span class="id" title="keyword">∀</span> <a id="G:395" class="idref" href="#G:395"><span class="id" title="binder">G</span></a> <a id="p:396" class="idref" href="#p:396"><span class="id" title="binder">p</span></a> <a id="A:397" class="idref" href="#A:397"><span class="id" title="binder">A</span></a> <a id="T:398" class="idref" href="#T:398"><span class="id" title="binder">T</span></a> <a id="v:399" class="idref" href="#v:399"><span class="id" title="binder">v</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:395"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:395"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">⊢!!</span></a> <a class="idref" href="ReplacementTyping.html#p:396"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#eb1918df832a03c95bc5e667bbcce5b5"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:397"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:398"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:398"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:395"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:399"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:398"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:395"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:399"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p:396"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A:397"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="path_sel_repl_v" class="idref" href="#path_sel_repl_v"><span class="id" title="lemma">path_sel_repl_v</span></a>: <span class="id" title="keyword">∀</span> <a id="G:400" class="idref" href="#G:400"><span class="id" title="binder">G</span></a> <a id="p:401" class="idref" href="#p:401"><span class="id" title="binder">p</span></a> <a id="A:402" class="idref" href="#A:402"><span class="id" title="binder">A</span></a> <a id="T:403" class="idref" href="#T:403"><span class="id" title="binder">T</span></a> <a id="v:404" class="idref" href="#v:404"><span class="id" title="binder">v</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:400"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:400"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:401"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:402"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:403"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:403"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:400"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:404"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:403"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:400"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:404"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p:401"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A:402"><span class="id" title="variable">A</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl2_v"><span class="id" title="lemma">path_sel_repl2_v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hv</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">∀</span> <a id="q:406" class="idref" href="#q:406"><span class="id" title="binder">q</span></a>, <a class="idref" href="ReplacementTyping.html#q:405"><span class="id" title="variable">q</span></a> <span class="id" title="notation">=</span> <a class="idref" href="ReplacementTyping.html#q:405"><span class="id" title="variable">q</span></a> <a class="idref" href="Definitions.html#086f2d7e593ce2ec7b60009929463693"><span class="id" title="notation">••</span></a> <span class="id" title="constructor">nil</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hnil</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>. <span class="id" title="tactic">rewrite</span>× <a class="idref" href="Binding.html#field_sel_nil"><span class="id" title="lemma">field_sel_nil</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">He1</span>: (<span class="id" title="var">Hnil</span> <span class="id" title="var">q</span>). <span class="id" title="var">lets</span> <span class="id" title="var">He2</span>: (<span class="id" title="var">Hnil</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">Hp</span>) <span class="id" title="keyword">as</span> [? <span class="id" title="var">Hq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp2_v"><span class="id" title="lemma">replacement_repl_closure_qp2_v</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hq</span> <span class="id" title="var">IHHp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">He1</span> <span class="id" title="tactic">at</span> 2. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">He2</span> <span class="id" title="tactic">at</span> 2. <span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#rpath"><span class="id" title="constructor">rpath</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="path_sel_repl_inv_v" class="idref" href="#path_sel_repl_inv_v"><span class="id" title="lemma">path_sel_repl_inv_v</span></a>: <span class="id" title="keyword">∀</span> <a id="G:407" class="idref" href="#G:407"><span class="id" title="binder">G</span></a> <a id="p:408" class="idref" href="#p:408"><span class="id" title="binder">p</span></a> <a id="A:409" class="idref" href="#A:409"><span class="id" title="binder">A</span></a> <a id="T:410" class="idref" href="#T:410"><span class="id" title="binder">T</span></a> <a id="v:411" class="idref" href="#v:411"><span class="id" title="binder">v</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:407"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:407"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">⊢!!!</span></a> <a class="idref" href="ReplacementTyping.html#p:408"><span class="id" title="variable">p</span></a> <a class="idref" href="PreciseTyping.html#531d18a606e4c8b57e11df3af3b1ece8"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><a class="idref" href="ReplacementTyping.html#A:409"><span class="id" title="variable">A</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:410"><span class="id" title="variable">T</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#T:410"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:407"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:411"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#p:408"><span class="id" title="variable">p</span></a><a class="idref" href="Definitions.html#56a240108deb0dfbaeb49e48db859cf7"><span class="id" title="notation">↓</span></a><a class="idref" href="ReplacementTyping.html#A:409"><span class="id" title="variable">A</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:407"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:411"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:410"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hp</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_inv_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">apply</span>× <a class="idref" href="InvertibleTyping.html#path_sel_inv_v"><span class="id" title="lemma">path_sel_inv_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHHv</span>. <span class="id" title="var">lets</span> <span class="id" title="var">Heq</span>: (<a class="idref" href="PreciseTyping.html#pf_pt3_unique"><span class="id" title="lemma">pf_pt3_unique</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp</span>). <span class="id" title="tactic">subst</span>×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">Case</span> "ty_sel_qp_r"%<span class="id" title="var">string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Replacement.html#repl_prefixes_sel"><span class="id" title="lemma">repl_prefixes_sel</span></a> <span class="id" title="var">H1</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">bs</span> [<span class="id" title="var">He1</span> <span class="id" title="var">He2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assert</span> (<a class="idref" href="Definitions.html#record_type"><span class="id" title="definition">record_type</span></a> (<a class="idref" href="Definitions.html#typ_rcd"><span class="id" title="constructor">typ_rcd</span></a> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">{</span></a><span class="id" title="var">A</span> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&gt;:</span></a> <span class="id" title="var">T</span> <a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">&lt;:</span></a> <span class="id" title="var">T</span><a class="idref" href="Definitions.html#b194d02349b51cad3901d2caba34fa00"><span class="id" title="notation">}</span></a>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hrt</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hqbs</span>: (<a class="idref" href="PreciseTyping.html#pf_pt3_trans_inv_mult'"><span class="id" title="lemma">pf_pt3_trans_inv_mult'</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="var">H</span> <span class="id" title="var">Hp</span> (<span class="id" title="constructor">or_intror</span> <span class="id" title="var">Hrt</span>)). <span class="id" title="tactic">apply</span>× <span class="id" title="var">IHHv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="invertible_typing_closure_tight_v" class="idref" href="#invertible_typing_closure_tight_v"><span class="id" title="lemma">invertible_typing_closure_tight_v</span></a>: <span class="id" title="keyword">∀</span> <a id="G:412" class="idref" href="#G:412"><span class="id" title="binder">G</span></a> <a id="v:413" class="idref" href="#v:413"><span class="id" title="binder">v</span></a> <a id="T:414" class="idref" href="#T:414"><span class="id" title="binder">T</span></a> <a id="U:415" class="idref" href="#U:415"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:412"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:412"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:413"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:414"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:412"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="ReplacementTyping.html#T:414"><span class="id" title="variable">T</span></a> <a class="idref" href="TightTyping.html#3350a03272d49af9ea81ab2b6cc8bf1f"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#U:415"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:412"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:413"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:415"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">HT</span> <span class="id" title="var">Hsub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hsub</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span>× (<a class="idref" href="ReplacementTyping.html#repl_andv"><span class="id" title="lemma">repl_andv</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">HT</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span>× (<a class="idref" href="ReplacementTyping.html#repl_andv"><span class="id" title="lemma">repl_andv</span></a> <span class="id" title="var">Hi</span> <span class="id" title="var">HT</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [? ?]. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_pq3_v"><span class="id" title="lemma">replacement_repl_closure_pq3_v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;repl&nbsp;closure&nbsp;for&nbsp;vals&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="PreciseTyping.html#pt2_exists"><span class="id" title="lemma">pt2_exists</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [? ?]. <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#replacement_repl_closure_qp3_v"><span class="id" title="lemma">replacement_repl_closure_qp3_v</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;repl&nbsp;closure&nbsp;for&nbsp;vals&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl_v"><span class="id" title="lemma">path_sel_repl_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#path_sel_repl_inv_v"><span class="id" title="lemma">path_sel_repl_inv_v</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="replacement_closure_v" class="idref" href="#replacement_closure_v"><span class="id" title="lemma">replacement_closure_v</span></a> : <span class="id" title="keyword">∀</span> <a id="G:416" class="idref" href="#G:416"><span class="id" title="binder">G</span></a> <a id="v:417" class="idref" href="#v:417"><span class="id" title="binder">v</span></a> <a id="T:418" class="idref" href="#T:418"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:416"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:416"><span class="id" title="variable">G</span></a> <a class="idref" href="TightTyping.html#1354e9ec79a363a81abeb2b2d3bd96e7"><span class="id" title="notation">⊢#</span></a> <a class="idref" href="Definitions.html#trm_val"><span class="id" title="constructor">trm_val</span></a> <a class="idref" href="ReplacementTyping.html#v:417"><span class="id" title="variable">v</span></a> <a class="idref" href="TightTyping.html#1354e9ec79a363a81abeb2b2d3bd96e7"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:418"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:416"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:417"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#T:418"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hty</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHty</span> <span class="id" title="var">v</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="ReplacementTyping.html#invertible_typing_closure_tight_v"><span class="id" title="lemma">invertible_typing_closure_tight_v</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="repl_to_invertible_obj" class="idref" href="#repl_to_invertible_obj"><span class="id" title="lemma">repl_to_invertible_obj</span></a> <a id="G:419" class="idref" href="#G:419"><span class="id" title="binder">G</span></a> <a id="U:420" class="idref" href="#U:420"><span class="id" title="binder">U</span></a> <a id="v:421" class="idref" href="#v:421"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:419"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:419"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:421"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#U:420"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="U':422" class="idref" href="#U':422"><span class="id" title="binder">U'</span></a><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G:419"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:421"><span class="id" title="variable">v</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#U':422"><span class="id" title="variable">U'</span></a> <span class="id" title="notation">∧</span> <a class="idref" href="ReplacementTyping.html#G:419"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseTyping.html#c7ef41c91aa73ea0925fafe08ac00851"><span class="id" title="notation">⊢</span></a> <a class="idref" href="ReplacementTyping.html#U:420"><span class="id" title="variable">U</span></a> <a class="idref" href="PreciseTyping.html#c7ef41c91aa73ea0925fafe08ac00851"><span class="id" title="notation">⟿</span></a> <a class="idref" href="ReplacementTyping.html#U':422"><span class="id" title="variable">U'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span> <span class="id" title="var">Hv</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <span class="id" title="var">U</span>. <span class="id" title="tactic">split</span>×. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHv</span> <span class="id" title="var">_</span> <span class="id" title="var">Hi</span> <span class="id" title="constructor">eq_refl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">U'</span> [<span class="id" title="var">Hinv</span> <span class="id" title="var">Hrc</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="Sequences.html#star_trans"><span class="id" title="lemma">star_trans</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hrc</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Sequences.html#star_one"><span class="id" title="lemma">star_one</span></a>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="repl_val_to_precise_lambda" class="idref" href="#repl_val_to_precise_lambda"><span class="id" title="lemma">repl_val_to_precise_lambda</span></a>: <span class="id" title="keyword">∀</span> <a id="G:423" class="idref" href="#G:423"><span class="id" title="binder">G</span></a> <a id="v:424" class="idref" href="#v:424"><span class="id" title="binder">v</span></a> <a id="S:425" class="idref" href="#S:425"><span class="id" title="binder">S</span></a> <a id="T:426" class="idref" href="#T:426"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:423"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:424"><span class="id" title="variable">v</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="ReplacementTyping.html#S:425"><span class="id" title="variable">S</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="ReplacementTyping.html#T:426"><span class="id" title="variable">T</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:423"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="L:427" class="idref" href="#L:427"><span class="id" title="binder">L</span></a> <a id="S':428" class="idref" href="#S':428"><span class="id" title="binder">S'</span></a> <a id="T':429" class="idref" href="#T':429"><span class="id" title="binder">T'</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:423"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">v</span></a> <a class="idref" href="ReplacementTyping.html#v:424"><span class="id" title="variable">v</span></a> <a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">∀(</span></a><a class="idref" href="ReplacementTyping.html#S':428"><span class="id" title="variable">S'</span></a><a class="idref" href="Definitions.html#5602fefe5ae9ac7607d0a75368b09df0"><span class="id" title="notation">)</span></a> <a class="idref" href="ReplacementTyping.html#T':429"><span class="id" title="variable">T'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:423"><span class="id" title="variable">G</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <a class="idref" href="ReplacementTyping.html#S:425"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="ReplacementTyping.html#S':428"><span class="id" title="variable">S'</span></a> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="keyword">∀</span> <a id="y:430" class="idref" href="#y:430"><span class="id" title="binder">y</span></a>, <a class="idref" href="ReplacementTyping.html#y:430"><span class="id" title="variable">y</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">notin</span> <a class="idref" href="ReplacementTyping.html#L:427"><span class="id" title="variable">L</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:423"><span class="id" title="variable">G</span></a> <span class="id" title="notation">&amp;</span> <a class="idref" href="ReplacementTyping.html#y:430"><span class="id" title="variable">y</span></a> <span class="id" title="notation">~</span> <a class="idref" href="ReplacementTyping.html#S:425"><span class="id" title="variable">S</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">⊢</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="ReplacementTyping.html#y:430"><span class="id" title="variable">y</span></a> <a class="idref" href="ReplacementTyping.html#T':429"><span class="id" title="variable">T'</span></a> <a class="idref" href="Definitions.html#d77433d9a5f06bee50380b6ca9a3f271"><span class="id" title="notation">&lt;:</span></a> <a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <a class="idref" href="ReplacementTyping.html#y:430"><span class="id" title="variable">y</span></a> <a class="idref" href="ReplacementTyping.html#T:426"><span class="id" title="variable">T</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Ht</span> <span class="id" title="var">Hg</span>. <span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="InvertibleTyping.html#invertible_val_to_precise_lambda"><span class="id" title="lemma">invertible_val_to_precise_lambda</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHHt</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="constructor">eq_refl</span> <span class="id" title="var">Hg</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">L'</span> [<span class="id" title="var">S'</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Hp</span> [<span class="id" title="var">Hss</span> <span class="id" title="var">Hst</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">L</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="var">L'</span> <span class="id" title="notation">\</span><span class="id" title="notation">u</span> <span class="id" title="axiom">dom</span> <span class="id" title="var">G</span>) <span class="id" title="var">S'</span> <span class="id" title="var">T'</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<span class="id" title="var">S1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>× <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>. <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="inductive">ok</span> (<span class="id" title="var">G</span> <span class="id" title="notation">&amp;</span> <span class="id" title="var">y</span> <span class="id" title="notation">~</span> <span class="id" title="var">S</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hok</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>× <span class="id" title="constructor">ok_push</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Definitions.html#subtyp_trans"><span class="id" title="constructor">subtyp_trans</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T</span>:=<a class="idref" href="Definitions.html#open_typ"><span class="id" title="definition">open_typ</span></a> <span class="id" title="var">y</span> <span class="id" title="var">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="Narrowing.html#narrow_subtyping"><span class="id" title="lemma">narrow_subtyping</span></a>. <span class="id" title="tactic">apply</span>× <span class="id" title="var">Hst</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Subenvironments.html#subenv_last"><span class="id" title="lemma">subenv_last</span></a>. <span class="id" title="tactic">apply</span>× <a class="idref" href="TightTyping.html#tight_to_general"><span class="id" title="lemma">tight_to_general</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">apply</span>× <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="repl_val_to_invertible_new" class="idref" href="#repl_val_to_invertible_new"><span class="id" title="lemma">repl_val_to_invertible_new</span></a> : <span class="id" title="keyword">∀</span> <a id="G:431" class="idref" href="#G:431"><span class="id" title="binder">G</span></a> <a id="r0:432" class="idref" href="#r0:432"><span class="id" title="binder">r0</span></a> <a id="A:433" class="idref" href="#A:433"><span class="id" title="binder">A</span></a> <a id="T:434" class="idref" href="#T:434"><span class="id" title="binder">T</span></a> <a id="ds:435" class="idref" href="#ds:435"><span class="id" title="binder">ds</span></a> <a id="U:436" class="idref" href="#U:436"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:431"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:431"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">ν</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">[</span></a><a class="idref" href="ReplacementTyping.html#r0:432"><span class="id" title="variable">r0</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">↘</span></a><a class="idref" href="ReplacementTyping.html#A:433"><span class="id" title="variable">A</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">](</span></a><a class="idref" href="ReplacementTyping.html#T:434"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">)</span></a><a class="idref" href="ReplacementTyping.html#ds:435"><span class="id" title="variable">ds</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:436"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="T':437" class="idref" href="#T':437"><span class="id" title="binder">T'</span></a><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G:431"><span class="id" title="variable">G</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">⊢##</span></a><a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">v</span></a> <a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">ν</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">[</span></a><a class="idref" href="ReplacementTyping.html#r0:432"><span class="id" title="variable">r0</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">↘</span></a><a class="idref" href="ReplacementTyping.html#A:433"><span class="id" title="variable">A</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">](</span></a><a class="idref" href="ReplacementTyping.html#T:434"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">)</span></a><a class="idref" href="ReplacementTyping.html#ds:435"><span class="id" title="variable">ds</span></a> <a class="idref" href="InvertibleTyping.html#3592546c6d4926a7d0b92c881bbf3785"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T':437"><span class="id" title="variable">T'</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hin</span> <span class="id" title="var">Hrv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">Hrv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">lets</span> <span class="id" title="var">Hinvv</span>: (<a class="idref" href="InvertibleTyping.html#invertible_to_precise_new"><span class="id" title="lemma">invertible_to_precise_new</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hinvv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T'</span> [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hpv</span> <span class="id" title="var">Hr</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHrv1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">IHHrv1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHrv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">IHHrv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHrv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">IHHrv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHrv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">IHHrv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHrv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">IHHrv</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHrv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span> <span class="id" title="constructor">eq_refl</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">IHHrv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="repl_val_to_precise_new" class="idref" href="#repl_val_to_precise_new"><span class="id" title="lemma">repl_val_to_precise_new</span></a> : <span class="id" title="keyword">∀</span> <a id="G:438" class="idref" href="#G:438"><span class="id" title="binder">G</span></a> <a id="r0:439" class="idref" href="#r0:439"><span class="id" title="binder">r0</span></a> <a id="A:440" class="idref" href="#A:440"><span class="id" title="binder">A</span></a> <a id="T:441" class="idref" href="#T:441"><span class="id" title="binder">T</span></a> <a id="ds:442" class="idref" href="#ds:442"><span class="id" title="binder">ds</span></a> <a id="U:443" class="idref" href="#U:443"><span class="id" title="binder">U</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Definitions.html#inert"><span class="id" title="inductive">inert</span></a> <a class="idref" href="ReplacementTyping.html#G:438"><span class="id" title="variable">G</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ReplacementTyping.html#G:438"><span class="id" title="variable">G</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">⊢//</span></a><a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">v</span></a> <a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">ν</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">[</span></a><a class="idref" href="ReplacementTyping.html#r0:439"><span class="id" title="variable">r0</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">↘</span></a><a class="idref" href="ReplacementTyping.html#A:440"><span class="id" title="variable">A</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">](</span></a><a class="idref" href="ReplacementTyping.html#T:441"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">)</span></a><a class="idref" href="ReplacementTyping.html#ds:442"><span class="id" title="variable">ds</span></a> <a class="idref" href="ReplacementTyping.html#b2f9185fb1a19cec11e77412583b017b"><span class="id" title="notation">:</span></a> <a class="idref" href="ReplacementTyping.html#U:443"><span class="id" title="variable">U</span></a> <span class="id" title="notation">→</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∃</span> <a id="T':444" class="idref" href="#T':444"><span class="id" title="binder">T'</span></a><span class="id" title="notation">,</span> <a class="idref" href="ReplacementTyping.html#G:438"><span class="id" title="variable">G</span></a> <a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">⊢!</span></a><a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">v</span></a> <a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">ν</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">[</span></a><a class="idref" href="ReplacementTyping.html#r0:439"><span class="id" title="variable">r0</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">↘</span></a><a class="idref" href="ReplacementTyping.html#A:440"><span class="id" title="variable">A</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">](</span></a><a class="idref" href="ReplacementTyping.html#T:441"><span class="id" title="variable">T</span></a><a class="idref" href="Definitions.html#fb8fa075fb63e32f0a950a9184c4daef"><span class="id" title="notation">)</span></a><a class="idref" href="ReplacementTyping.html#ds:442"><span class="id" title="variable">ds</span></a> <a class="idref" href="PreciseFlow.html#9352b36e773c80f96d88a9284b3018d7"><span class="id" title="notation">:</span></a> <a class="idref" href="Definitions.html#57e8a3f1aebb1c6069654ec2f0cd7a19"><span class="id" title="notation">μ</span></a> <a class="idref" href="ReplacementTyping.html#T':444"><span class="id" title="variable">T'</span></a><span class="id" title="notation">)</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">introv</span> <span class="id" title="var">Hin</span> <span class="id" title="var">Hrv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hinvv</span>: (<a class="idref" href="ReplacementTyping.html#repl_val_to_invertible_new"><span class="id" title="lemma">repl_val_to_invertible_new</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hrv</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hinvv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T'</span> <span class="id" title="var">Hinvv</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">lets</span> <span class="id" title="var">Hpv</span>: (<a class="idref" href="InvertibleTyping.html#invertible_to_precise_new"><span class="id" title="lemma">invertible_to_precise_new</span></a> <span class="id" title="var">Hin</span> <span class="id" title="var">Hinvv</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">T''</span> [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hpv</span> ?]]].<br/>
&nbsp;&nbsp;<span class="id" title="var">inversions</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
